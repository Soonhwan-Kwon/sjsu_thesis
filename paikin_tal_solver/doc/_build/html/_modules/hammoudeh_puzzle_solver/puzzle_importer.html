

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>hammoudeh_puzzle_solver.puzzle_importer &mdash; Hammoudeh Puzzle Solver 0.01 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="Hammoudeh Puzzle Solver 0.01 documentation" href="../../index.html"/>
        <link rel="up" title="Module code" href="../index.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> Hammoudeh Puzzle Solver
          

          
          </a>

          
            
            
              <div class="version">
                0.01
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul>
<li class="toctree-l1"><a class="reference internal" href="../../modules.html">Project Packages</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">Hammoudeh Puzzle Solver</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../index.html">Module code</a> &raquo;</li>
      
    <li>hammoudeh_puzzle_solver.puzzle_importer</li>
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for hammoudeh_puzzle_solver.puzzle_importer</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;Jigsaw Puzzle Object</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">copy</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">math</span>
<span class="kn">import</span> <span class="nn">random</span>
<span class="kn">import</span> <span class="nn">pickle</span>
<span class="kn">import</span> <span class="nn">datetime</span>

<span class="kn">import</span> <span class="nn">numpy</span>
<span class="kn">import</span> <span class="nn">cv2</span>  <span class="c1"># OpenCV</span>
<span class="kn">from</span> <span class="nn">enum</span> <span class="kn">import</span> <span class="n">Enum</span>

<span class="kn">from</span> <span class="nn">hammoudeh_puzzle_solver.puzzle_piece</span> <span class="kn">import</span> <span class="n">PuzzlePiece</span><span class="p">,</span> <span class="n">PuzzlePieceRotation</span><span class="p">,</span> <span class="n">PuzzlePieceSide</span><span class="p">,</span> <span class="n">SolidColor</span>


<div class="viewcode-block" id="PickleHelper"><a class="viewcode-back" href="../../hammoudeh_puzzle_solver.html#hammoudeh_puzzle_solver.puzzle_importer.PickleHelper">[docs]</a><span class="k">class</span> <span class="nc">PickleHelper</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The Pickle Helper class is used to simplify the importing and exporting of objects via the Python Pickle</span>
<span class="sd">    Library.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@staticmethod</span>
<div class="viewcode-block" id="PickleHelper.importer"><a class="viewcode-back" href="../../hammoudeh_puzzle_solver.html#hammoudeh_puzzle_solver.puzzle_importer.PickleHelper.importer">[docs]</a>    <span class="k">def</span> <span class="nf">importer</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Generic Pickling Importer Method</span>

<span class="sd">        Helper method used to import any object from a Pickle file.</span>

<span class="sd">        ::Note::: This function does not support objects of type &quot;Puzzle.&quot;  They should use the class&#39; specialized</span>
<span class="sd">        Pickling functions.</span>

<span class="sd">        Args:</span>
<span class="sd">            filename (str): Pickle Filename</span>

<span class="sd">        Returns: The object serialized in the specified filename.</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># Check the file directory exists</span>
        <span class="n">file_directory</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">filename</span><span class="p">))</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">file_directory</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The file directory: </span><span class="se">\&quot;</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">file_directory</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\&quot;</span><span class="s2"> does not appear to exist.&quot;</span><span class="p">)</span>

        <span class="c1"># import from the pickle file.</span>
        <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">obj</span></div>

    <span class="nd">@staticmethod</span>
<div class="viewcode-block" id="PickleHelper.exporter"><a class="viewcode-back" href="../../hammoudeh_puzzle_solver.html#hammoudeh_puzzle_solver.puzzle_importer.PickleHelper.exporter">[docs]</a>    <span class="k">def</span> <span class="nf">exporter</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">filename</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Generic Pickling Exporter Method</span>

<span class="sd">        Helper method used to export any object to a Pickle file.</span>

<span class="sd">        ::Note::: This function does not support objects of type &quot;Puzzle.&quot;  They should use the class&#39; specialized</span>
<span class="sd">        Pickling functions.</span>

<span class="sd">        Args:</span>
<span class="sd">            obj:                Object to be exported to a specified Pickle file.</span>
<span class="sd">            filename (str):     Name of the Pickle file.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># If the file directory does not exist create it.</span>
        <span class="n">file_directory</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">filename</span><span class="p">))</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">file_directory</span><span class="p">):</span>
            <span class="k">print</span> <span class="s2">&quot;Creating pickle export directory </span><span class="se">\&quot;</span><span class="si">%s</span><span class="se">\&quot;</span><span class="s2">.&quot;</span> <span class="o">%</span> <span class="n">file_directory</span>
            <span class="n">os</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">file_directory</span><span class="p">)</span>

        <span class="c1"># Dump pickle to the file.</span>
        <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span>
        <span class="n">pickle</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div></div>


<div class="viewcode-block" id="PuzzleType"><a class="viewcode-back" href="../../hammoudeh_puzzle_solver.html#hammoudeh_puzzle_solver.puzzle_importer.PuzzleType">[docs]</a><span class="k">class</span> <span class="nc">PuzzleType</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Type of the puzzle to solve.  Type 1 has no piece rotation while type 2 allows piece rotation.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">type1</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">type2</span> <span class="o">=</span> <span class="mi">2</span></div>


<div class="viewcode-block" id="PuzzleDimensions"><a class="viewcode-back" href="../../hammoudeh_puzzle_solver.html#hammoudeh_puzzle_solver.puzzle_importer.PuzzleDimensions">[docs]</a><span class="k">class</span> <span class="nc">PuzzleDimensions</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Stores the information regarding the puzzle dimensions including its top left and bottom right corners</span>
<span class="sd">    as well as its total size.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">puzzle_id</span><span class="p">,</span> <span class="n">starting_point</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">puzzle_id</span> <span class="o">=</span> <span class="n">puzzle_id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">top_left</span> <span class="o">=</span> <span class="p">[</span><span class="n">starting_point</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">starting_point</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bottom_right</span> <span class="o">=</span> <span class="p">[</span><span class="n">starting_point</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">starting_point</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">total_size</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

<div class="viewcode-block" id="PuzzleDimensions.update_dimensions"><a class="viewcode-back" href="../../hammoudeh_puzzle_solver.html#hammoudeh_puzzle_solver.puzzle_importer.PuzzleDimensions.update_dimensions">[docs]</a>    <span class="k">def</span> <span class="nf">update_dimensions</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Puzzle Dimensions Updater</span>

<span class="sd">        Updates the total dimensions of the puzzle.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">total_size</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bottom_right</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">top_left</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">bottom_right</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">top_left</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="DirectAccuracyType"><a class="viewcode-back" href="../../hammoudeh_puzzle_solver.html#hammoudeh_puzzle_solver.puzzle_importer.DirectAccuracyType">[docs]</a><span class="k">class</span> <span class="nc">DirectAccuracyType</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Defines the direct accuracy types.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">Standard_Direct_Accuracy</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">Modified_Direct_Accuracy</span> <span class="o">=</span> <span class="mi">0</span></div>


<div class="viewcode-block" id="PuzzleResultsCollection"><a class="viewcode-back" href="../../hammoudeh_puzzle_solver.html#hammoudeh_puzzle_solver.puzzle_importer.PuzzleResultsCollection">[docs]</a><span class="k">class</span> <span class="nc">PuzzleResultsCollection</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Stores all the puzzle results information in a single collection.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">_PERFORM_ASSERT_CHECKS</span> <span class="o">=</span> <span class="bp">True</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pieces_partitioned_by_puzzle</span><span class="p">,</span> <span class="n">image_filepaths</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_puzzle_results</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="c1"># Iterate through all the solved puzzles</span>
        <span class="k">for</span> <span class="n">set_of_pieces</span> <span class="ow">in</span> <span class="n">pieces_partitioned_by_puzzle</span><span class="p">:</span>
            <span class="c1"># Iterate through all of the pieces in the puzzle</span>
            <span class="k">for</span> <span class="n">piece</span> <span class="ow">in</span> <span class="n">set_of_pieces</span><span class="p">:</span>

                <span class="c1"># Iterate through all the pieces</span>
                <span class="n">puzzle_exists</span> <span class="o">=</span> <span class="bp">False</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_puzzle_results</span><span class="p">)):</span>
                    <span class="c1"># Check if the puzzle ID matches this set of results information.</span>
                    <span class="k">if</span> <span class="n">piece</span><span class="o">.</span><span class="n">actual_puzzle_id</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_puzzle_results</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">puzzle_id</span><span class="p">:</span>
                        <span class="n">puzzle_exists</span> <span class="o">=</span> <span class="bp">True</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_puzzle_results</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">numb_pieces</span> <span class="o">+=</span> <span class="mi">1</span>
                        <span class="k">continue</span>

                <span class="c1"># If the puzzle does not exist, then create a results information</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">puzzle_exists</span><span class="p">:</span>
                    <span class="n">new_puzzle</span> <span class="o">=</span> <span class="n">PuzzleResultsInformation</span><span class="p">(</span><span class="n">piece</span><span class="o">.</span><span class="n">actual_puzzle_id</span><span class="p">,</span>
                                                          <span class="n">image_filepaths</span><span class="p">[</span><span class="n">piece</span><span class="o">.</span><span class="n">actual_puzzle_id</span><span class="p">])</span>
                    <span class="n">new_puzzle</span><span class="o">.</span><span class="n">numb_pieces</span> <span class="o">=</span> <span class="mi">1</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_puzzle_results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_puzzle</span><span class="p">)</span>

        <span class="c1"># Sort by original puzzle id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_puzzle_results</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_puzzle_results</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">result</span><span class="p">:</span> <span class="n">result</span><span class="o">.</span><span class="n">puzzle_id</span><span class="p">)</span>

<div class="viewcode-block" id="PuzzleResultsCollection.calculate_accuracies"><a class="viewcode-back" href="../../hammoudeh_puzzle_solver.html#hammoudeh_puzzle_solver.puzzle_importer.PuzzleResultsCollection.calculate_accuracies">[docs]</a>    <span class="k">def</span> <span class="nf">calculate_accuracies</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">solved_puzzles</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Results Accuracy Calculator</span>

<span class="sd">        Calculates the standard direct, modified direct, and modified neighbor accuracies for a set of solved</span>
<span class="sd">        puzzles.</span>

<span class="sd">        Args:</span>
<span class="sd">            solved_puzzles (List[Puzzle]): A set of solved puzzles</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># Go through all of the original puzzles</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_puzzle_results</span><span class="p">)):</span>
            <span class="k">for</span> <span class="n">puzzle</span> <span class="ow">in</span> <span class="n">solved_puzzles</span><span class="p">:</span>
                <span class="c1"># Update the puzzle results</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_puzzle_results</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">resolve_direct_accuracies</span><span class="p">(</span><span class="n">puzzle</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_puzzle_results</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">resolve_neighbor_accuracies</span><span class="p">(</span><span class="n">puzzle</span><span class="p">)</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">results</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Puzzle Results Accessor</span>

<span class="sd">        Returns (PuzzleResultsInformation): Puzzle results information for a single puzzle.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_puzzle_results</span>

<div class="viewcode-block" id="PuzzleResultsCollection.output_results_images"><a class="viewcode-back" href="../../hammoudeh_puzzle_solver.html#hammoudeh_puzzle_solver.puzzle_importer.PuzzleResultsCollection.output_results_images">[docs]</a>    <span class="k">def</span> <span class="nf">output_results_images</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">solved_puzzles</span><span class="p">,</span> <span class="n">puzzle_type</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates images showing the results of the image.</span>

<span class="sd">        Args:</span>
<span class="sd">            solved_puzzles (List[Puzzle]): A set of solved puzzles.</span>
<span class="sd">            puzzle_type (PuzzleType): Type of the solved image</span>
<span class="sd">            timestamp (float): Timestamp</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># Standard direct accuracy first then modified</span>
        <span class="k">for</span> <span class="n">original_puzzle_id</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_puzzle_results</span><span class="p">)):</span>

            <span class="c1"># Get the individual results and puzzle</span>
            <span class="n">results</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_puzzle_results</span><span class="p">[</span><span class="n">original_puzzle_id</span><span class="p">]</span>

            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">):</span>

                <span class="c1"># Select the accuracy type</span>
                <span class="n">direct_acc</span> <span class="o">=</span> <span class="bp">None</span>
                <span class="n">descriptor</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
                <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">direct_acc</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="n">standard_direct_accuracy</span>
                    <span class="n">descriptor</span> <span class="o">=</span> <span class="s2">&quot;std_direct_acc&quot;</span>
                <span class="k">elif</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="n">direct_acc</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="n">modified_direct_accuracy</span>
                    <span class="n">descriptor</span> <span class="o">=</span> <span class="s2">&quot;mod_direct_acc&quot;</span>
                <span class="c1"># Verify a direct accuracy was selected</span>
                <span class="k">assert</span> <span class="n">direct_acc</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span>

                <span class="c1"># Get the solved puzzle that best matches this original image.</span>
                <span class="n">solved_puzzle</span> <span class="o">=</span> <span class="n">solved_puzzles</span><span class="p">[</span><span class="n">direct_acc</span><span class="o">.</span><span class="n">solved_puzzle_id</span><span class="p">]</span>

                <span class="c1"># Verify the original puzzle id matches this set of direct accuracy</span>
                <span class="k">if</span> <span class="n">PuzzleResultsCollection</span><span class="o">.</span><span class="n">_PERFORM_ASSERT_CHECKS</span><span class="p">:</span>
                    <span class="k">assert</span> <span class="n">direct_acc</span><span class="o">.</span><span class="n">original_puzzle_id</span> <span class="o">==</span> <span class="n">original_puzzle_id</span>

                <span class="c1"># Set the piece coloring using the selected accuracy type</span>
                <span class="n">solved_puzzle</span><span class="o">.</span><span class="n">set_piece_color_for_direct_accuracy</span><span class="p">(</span><span class="n">direct_acc</span><span class="p">)</span>

                <span class="c1"># Determine whether the puzzle id should be used in the filename</span>
                <span class="n">solved_puzzle_id</span> <span class="o">=</span> <span class="n">solved_puzzle</span><span class="o">.</span><span class="n">id_number</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_puzzle_results</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="k">else</span> <span class="bp">None</span>
                <span class="n">output_filename</span> <span class="o">=</span> <span class="n">Puzzle</span><span class="o">.</span><span class="n">make_image_filename</span><span class="p">(</span><span class="n">descriptor</span><span class="p">,</span> <span class="n">Puzzle</span><span class="o">.</span><span class="n">OUTPUT_IMAGE_DIRECTORY</span><span class="p">,</span> <span class="n">puzzle_type</span><span class="p">,</span>
                                                             <span class="n">timestamp</span><span class="p">,</span> <span class="n">orig_img_filename</span><span class="o">=</span><span class="n">results</span><span class="o">.</span><span class="n">original_filename</span><span class="p">,</span>
                                                             <span class="n">puzzle_id</span><span class="o">=</span><span class="n">solved_puzzle_id</span><span class="p">)</span>
                <span class="c1"># Stores the results to a file.</span>
                <span class="n">solved_puzzle</span><span class="o">.</span><span class="n">build_puzzle_image</span><span class="p">(</span><span class="n">use_results_coloring</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
                <span class="n">solved_puzzle</span><span class="o">.</span><span class="n">save_to_file</span><span class="p">(</span><span class="n">output_filename</span><span class="p">)</span>

            <span class="c1"># Get the individual results and puzzle</span>
            <span class="n">neighbor_acc</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="n">modified_neighbor_accuracy</span>

            <span class="c1"># Iterate each puzzle piece and set its color for each side</span>
            <span class="n">solved_puzzle</span> <span class="o">=</span> <span class="n">solved_puzzles</span><span class="p">[</span><span class="n">neighbor_acc</span><span class="o">.</span><span class="n">solved_puzzle_id</span><span class="p">]</span>

            <span class="c1"># Verify the original puzzle id matches this set of direct accuracy</span>
            <span class="k">if</span> <span class="n">PuzzleResultsCollection</span><span class="o">.</span><span class="n">_PERFORM_ASSERT_CHECKS</span><span class="p">:</span>
                <span class="k">assert</span> <span class="n">neighbor_acc</span><span class="o">.</span><span class="n">original_puzzle_id</span> <span class="o">==</span> <span class="n">original_puzzle_id</span>

            <span class="c1"># Go through and color each piece</span>
            <span class="k">for</span> <span class="n">piece</span> <span class="ow">in</span> <span class="n">solved_puzzle</span><span class="o">.</span><span class="n">pieces</span><span class="p">:</span>
                <span class="n">piece</span><span class="o">.</span><span class="n">reset_image_coloring_for_polygons</span><span class="p">()</span>
                <span class="k">for</span> <span class="n">side</span> <span class="ow">in</span> <span class="n">PuzzlePieceSide</span><span class="o">.</span><span class="n">get_all_sides</span><span class="p">():</span>
                    <span class="n">coloring</span> <span class="o">=</span> <span class="n">neighbor_acc</span><span class="o">.</span><span class="n">get_piece_side_result</span><span class="p">(</span><span class="n">piece</span><span class="o">.</span><span class="n">id_number</span><span class="p">,</span> <span class="n">side</span><span class="p">)</span>
                    <span class="n">piece</span><span class="o">.</span><span class="n">results_image_polygon_coloring</span><span class="p">(</span><span class="n">side</span><span class="p">,</span> <span class="n">coloring</span><span class="p">)</span>

            <span class="c1"># Define the output filename</span>
            <span class="n">descriptor</span> <span class="o">=</span> <span class="s2">&quot;neighbor_acc&quot;</span>
            <span class="n">solved_puzzle_id</span> <span class="o">=</span> <span class="n">solved_puzzle</span><span class="o">.</span><span class="n">id_number</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_puzzle_results</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="k">else</span> <span class="bp">None</span>
            <span class="n">output_filename</span> <span class="o">=</span> <span class="n">Puzzle</span><span class="o">.</span><span class="n">make_image_filename</span><span class="p">(</span><span class="n">descriptor</span><span class="p">,</span> <span class="n">Puzzle</span><span class="o">.</span><span class="n">OUTPUT_IMAGE_DIRECTORY</span><span class="p">,</span> <span class="n">puzzle_type</span><span class="p">,</span>
                                                         <span class="n">timestamp</span><span class="p">,</span> <span class="n">orig_img_filename</span><span class="o">=</span><span class="n">results</span><span class="o">.</span><span class="n">original_filename</span><span class="p">,</span>
                                                         <span class="n">puzzle_id</span><span class="o">=</span><span class="n">solved_puzzle_id</span><span class="p">)</span>

            <span class="c1"># Stores the results to a file.</span>
            <span class="n">solved_puzzle</span><span class="o">.</span><span class="n">build_puzzle_image</span><span class="p">(</span><span class="n">use_results_coloring</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
            <span class="n">solved_puzzle</span><span class="o">.</span><span class="n">save_to_file</span><span class="p">(</span><span class="n">output_filename</span><span class="p">)</span></div>

<div class="viewcode-block" id="PuzzleResultsCollection.print_results"><a class="viewcode-back" href="../../hammoudeh_puzzle_solver.html#hammoudeh_puzzle_solver.puzzle_importer.PuzzleResultsCollection.print_results">[docs]</a>    <span class="k">def</span> <span class="nf">print_results</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Solver Accuracy Results Printer</span>

<span class="sd">        Prints the accuracy results of a solver to the console.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># Iterate through each puzzle and print that puzzle&#39;s results</span>
        <span class="k">for</span> <span class="n">results</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_puzzle_results</span><span class="p">:</span>
            <span class="c1"># Print the header line</span>
            <span class="k">print</span> <span class="s2">&quot;Original Filename: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">results</span><span class="o">.</span><span class="n">original_filename</span>
            <span class="k">print</span> <span class="s2">&quot;Puzzle Identification Number: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">results</span><span class="o">.</span><span class="n">puzzle_id</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>

            <span class="c1"># Print the standard accuracy information</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">):</span>

                <span class="c1"># Select the type of direct accuracy to print.</span>
                <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">acc_name</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">Standard&quot;</span>
                    <span class="n">direct_acc</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="n">standard_direct_accuracy</span>
                <span class="k">elif</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="n">acc_name</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">Modified&quot;</span>
                    <span class="n">direct_acc</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="n">modified_direct_accuracy</span>

                <span class="c1"># Print the selected direct accuracy type</span>
                <span class="n">numb_pieces_in_original_puzzle</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="n">numb_pieces</span>
                <span class="n">piece_count_weight</span> <span class="o">=</span> <span class="n">direct_acc</span><span class="o">.</span><span class="n">numb_different_puzzle</span> <span class="o">+</span> <span class="n">numb_pieces_in_original_puzzle</span>
                <span class="k">print</span> <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">Solved Puzzle ID #</span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">direct_acc</span><span class="o">.</span><span class="n">solved_puzzle_id</span>
                <span class="k">print</span> <span class="n">acc_name</span> <span class="o">+</span> <span class="s2">&quot; Direct Accuracy:</span><span class="se">\t\t</span><span class="si">%d</span><span class="s2">/</span><span class="si">%d</span><span class="se">\t</span><span class="s2">(</span><span class="si">%3.2f%%</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">direct_acc</span><span class="o">.</span><span class="n">numb_correct_placements</span><span class="p">,</span>
                                                                            <span class="n">piece_count_weight</span><span class="p">,</span>
                                                                            <span class="mf">100.0</span> <span class="o">*</span> <span class="n">direct_acc</span><span class="o">.</span><span class="n">numb_correct_placements</span> <span class="o">/</span> <span class="n">piece_count_weight</span><span class="p">)</span>
                <span class="k">print</span> <span class="n">acc_name</span> <span class="o">+</span> <span class="s2">&quot; Numb from Diff Puzzle:</span><span class="se">\t</span><span class="si">%d</span><span class="s2">/</span><span class="si">%d</span><span class="se">\t</span><span class="s2">(</span><span class="si">%3.2f%%</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">direct_acc</span><span class="o">.</span><span class="n">numb_different_puzzle</span><span class="p">,</span>
                                                                                <span class="n">piece_count_weight</span><span class="p">,</span>
                                                                                <span class="mf">100.0</span> <span class="o">*</span> <span class="n">direct_acc</span><span class="o">.</span><span class="n">numb_different_puzzle</span> <span class="o">/</span> <span class="n">piece_count_weight</span><span class="p">)</span>
                <span class="k">print</span> <span class="n">acc_name</span> <span class="o">+</span> <span class="s2">&quot; Numb Wrong Location:</span><span class="se">\t</span><span class="si">%d</span><span class="s2">/</span><span class="si">%d</span><span class="se">\t</span><span class="s2">(</span><span class="si">%3.2f%%</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">direct_acc</span><span class="o">.</span><span class="n">numb_wrong_location</span><span class="p">,</span>
                                                                              <span class="n">piece_count_weight</span><span class="p">,</span>
                                                                              <span class="mf">100.0</span> <span class="o">*</span> <span class="n">direct_acc</span><span class="o">.</span><span class="n">numb_wrong_location</span> <span class="o">/</span> <span class="n">piece_count_weight</span><span class="p">)</span>
                <span class="k">print</span> <span class="n">acc_name</span> <span class="o">+</span> <span class="s2">&quot; Numb Wrong Rotation:</span><span class="se">\t</span><span class="si">%d</span><span class="s2">/</span><span class="si">%d</span><span class="se">\t</span><span class="s2">(</span><span class="si">%3.2f%%</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">direct_acc</span><span class="o">.</span><span class="n">numb_wrong_rotation</span><span class="p">,</span>
                                                                              <span class="n">piece_count_weight</span><span class="p">,</span>
                                                                              <span class="mf">100.0</span> <span class="o">*</span> <span class="n">direct_acc</span><span class="o">.</span><span class="n">numb_wrong_rotation</span> <span class="o">/</span> <span class="n">piece_count_weight</span><span class="p">)</span>
                <span class="c1"># Calculate the number of missing pieces</span>
                <span class="n">numb_pieces_missing</span> <span class="o">=</span> <span class="p">(</span><span class="n">numb_pieces_in_original_puzzle</span>
                                       <span class="o">-</span> <span class="n">direct_acc</span><span class="o">.</span><span class="n">numb_pieces_from_original_puzzle_in_solved_puzzle</span><span class="p">)</span>
                <span class="k">print</span> <span class="n">acc_name</span> <span class="o">+</span> <span class="s2">&quot; Numb Pieces Missing:</span><span class="se">\t</span><span class="si">%d</span><span class="s2">/</span><span class="si">%d</span><span class="se">\t</span><span class="s2">(</span><span class="si">%3.2f%%</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">numb_pieces_missing</span><span class="p">,</span>
                                                                              <span class="n">numb_pieces_in_original_puzzle</span><span class="p">,</span>
                                                                              <span class="mf">100.0</span> <span class="o">*</span> <span class="n">numb_pieces_missing</span> <span class="o">/</span> <span class="n">numb_pieces_in_original_puzzle</span><span class="p">)</span>
                <span class="c1"># Print a new line to separate the results</span>
                <span class="k">print</span> <span class="s2">&quot;&quot;</span>

            <span class="c1"># Print the modified neighbor accuracy</span>
            <span class="n">numb_pieces_in_original_puzzle</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="n">numb_pieces</span>
            <span class="n">neighbor_acc</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="n">modified_neighbor_accuracy</span>
            <span class="n">neighbor_count_weight</span> <span class="o">=</span> <span class="n">neighbor_acc</span><span class="o">.</span><span class="n">numb_pieces_in_original_puzzle</span> <span class="o">+</span> <span class="n">neighbor_acc</span><span class="o">.</span><span class="n">wrong_puzzle_id</span>
            <span class="n">neighbor_count_weight</span> <span class="o">*=</span> <span class="n">PuzzlePieceSide</span><span class="o">.</span><span class="n">get_numb_sides</span><span class="p">()</span>
            <span class="k">print</span> <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">Solved Puzzle ID #</span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">neighbor_acc</span><span class="o">.</span><span class="n">solved_puzzle_id</span>
            <span class="k">print</span> <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">Neighbor Accuracy:</span><span class="se">\t\t</span><span class="si">%d</span><span class="s2">/</span><span class="si">%d</span><span class="se">\t</span><span class="s2">(</span><span class="si">%3.2f%%</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">neighbor_acc</span><span class="o">.</span><span class="n">correct_neighbor_count</span><span class="p">,</span>
                                                                <span class="n">neighbor_count_weight</span><span class="p">,</span>
                                                                <span class="mf">100.0</span> <span class="o">*</span> <span class="n">neighbor_acc</span><span class="o">.</span><span class="n">correct_neighbor_count</span> <span class="o">/</span> <span class="n">neighbor_count_weight</span><span class="p">)</span>
            <span class="n">numb_missing_pieces</span> <span class="o">=</span> <span class="n">numb_pieces_in_original_puzzle</span> \
                                  <span class="o">-</span> <span class="n">neighbor_acc</span><span class="o">.</span><span class="n">numb_pieces_from_original_puzzle_in_solved_puzzle</span>
            <span class="k">print</span> <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">Numb Missing Pieces:</span><span class="se">\t</span><span class="si">%d</span><span class="s2">/</span><span class="si">%d</span><span class="se">\t</span><span class="s2">(</span><span class="si">%3.2f%%</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">numb_missing_pieces</span><span class="p">,</span>
                                                                <span class="n">results</span><span class="o">.</span><span class="n">numb_pieces</span><span class="p">,</span>
                                                                <span class="mf">100.0</span> <span class="o">*</span> <span class="n">numb_missing_pieces</span> <span class="o">/</span> <span class="n">results</span><span class="o">.</span><span class="n">numb_pieces</span><span class="p">)</span>
            <span class="n">numb_from_wrong_puzzle</span> <span class="o">=</span> <span class="n">neighbor_acc</span><span class="o">.</span><span class="n">wrong_puzzle_id</span>
            <span class="n">numb_pieces_in_puzzle</span> <span class="o">=</span> <span class="n">neighbor_acc</span><span class="o">.</span><span class="n">total_numb_pieces_in_solved_puzzle</span>
            <span class="k">print</span> <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">Numb from Diff Puzzle:</span><span class="se">\t</span><span class="si">%d</span><span class="s2">/</span><span class="si">%d</span><span class="se">\t</span><span class="s2">(</span><span class="si">%3.2f%%</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">numb_from_wrong_puzzle</span><span class="p">,</span>
                                                                  <span class="n">numb_pieces_in_puzzle</span><span class="p">,</span>
                                                                  <span class="mf">100.0</span> <span class="o">*</span> <span class="n">numb_from_wrong_puzzle</span> <span class="o">/</span> <span class="n">numb_pieces_in_puzzle</span><span class="p">)</span>
            <span class="c1"># Print a new line to separate the results</span>
            <span class="k">print</span> <span class="s2">&quot;&quot;</span>

            <span class="k">print</span> <span class="s2">&quot;</span><span class="se">\n\n\n</span><span class="s2">&quot;</span></div></div>


<div class="viewcode-block" id="PuzzleResultsInformation"><a class="viewcode-back" href="../../hammoudeh_puzzle_solver.html#hammoudeh_puzzle_solver.puzzle_importer.PuzzleResultsInformation">[docs]</a><span class="k">class</span> <span class="nc">PuzzleResultsInformation</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Encapsulates all of the accuracy results information for a puzzle.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">_PERFORM_ASSERT_CHECK</span> <span class="o">=</span> <span class="bp">True</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">puzzle_id</span><span class="p">,</span> <span class="n">original_filename</span><span class="p">):</span>

        <span class="c1"># Store the number of pieces and the puzzle id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">puzzle_id</span> <span class="o">=</span> <span class="n">puzzle_id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_numb_pieces</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_original_filename</span> <span class="o">=</span> <span class="n">original_filename</span>

        <span class="c1"># Define the attributes for the standard accuracy.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">standard_direct_accuracy</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">modified_direct_accuracy</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">modified_neighbor_accuracy</span> <span class="o">=</span> <span class="bp">None</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">numb_pieces</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the piece count for an implicit puzzle id</span>

<span class="sd">        Returns (int): Number of pieces in original puzzle with this puzzle id</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_numb_pieces</span>

    <span class="nd">@numb_pieces.setter</span>
    <span class="k">def</span> <span class="nf">numb_pieces</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_numb_pieces</span> <span class="o">=</span> <span class="n">value</span>

<div class="viewcode-block" id="PuzzleResultsInformation.resolve_neighbor_accuracies"><a class="viewcode-back" href="../../hammoudeh_puzzle_solver.html#hammoudeh_puzzle_solver.puzzle_importer.PuzzleResultsInformation.resolve_neighbor_accuracies">[docs]</a>    <span class="k">def</span> <span class="nf">resolve_neighbor_accuracies</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">puzzle</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Neighbor Accuracy Resolved</span>

<span class="sd">        This function is used to calculate the neighbor accuracy of a solved puzzle and compare it to</span>
<span class="sd">        the results of previously calculated accuracies to select the best one.</span>

<span class="sd">        Args:</span>
<span class="sd">            puzzle (Puzzle): A solved Puzzle</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># Placed piece array</span>
        <span class="n">placed_piece_matrix</span><span class="p">,</span> <span class="n">rotation_matrix</span> <span class="o">=</span> <span class="n">puzzle</span><span class="o">.</span><span class="n">build_placed_piece_info</span><span class="p">()</span>

        <span class="c1"># Create a temporary neighbor accuracy info</span>
        <span class="n">neighbor_accuracy_info</span> <span class="o">=</span> <span class="n">ModifiedNeighborAccuracy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">puzzle_id</span><span class="p">,</span> <span class="n">puzzle</span><span class="o">.</span><span class="n">id_number</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">numb_pieces</span><span class="p">)</span>

        <span class="c1"># Iterate through the set of pieces</span>
        <span class="k">for</span> <span class="n">piece</span> <span class="ow">in</span> <span class="n">puzzle</span><span class="o">.</span><span class="n">pieces</span><span class="p">:</span>

            <span class="n">original_neighbor_id_and_sides</span> <span class="o">=</span> <span class="n">piece</span><span class="o">.</span><span class="n">original_neighbor_id_numbers_and_sides</span>
            <span class="c1"># Sort the sides of the neighbor location to match the original order.</span>
            <span class="n">neighbor_location_and_sides</span> <span class="o">=</span> <span class="n">piece</span><span class="o">.</span><span class="n">get_neighbor_locations_and_sides</span><span class="p">()</span>
            <span class="n">neighbor_location_and_sides</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">neighbor_location_and_sides</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">tup</span><span class="p">:</span> <span class="n">tup</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>

            <span class="c1"># Perform a check of the piece location information</span>
            <span class="k">if</span> <span class="n">PuzzleResultsInformation</span><span class="o">.</span><span class="n">_PERFORM_ASSERT_CHECK</span><span class="p">:</span>
                <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">neighbor_location_and_sides</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">original_neighbor_id_and_sides</span><span class="p">)</span>
                <span class="c1"># Verify the side in each element is the same</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">neighbor_location_and_sides</span><span class="p">)):</span>
                    <span class="k">assert</span> <span class="n">neighbor_location_and_sides</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="n">original_neighbor_id_and_sides</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>

            <span class="c1"># Iterate through all sides and check the</span>
            <span class="k">for</span> <span class="n">side_numb</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">neighbor_location_and_sides</span><span class="p">)):</span>

                <span class="n">side</span> <span class="o">=</span> <span class="n">PuzzlePieceSide</span><span class="p">(</span><span class="n">side_numb</span><span class="p">)</span>

                <span class="c1"># Verify the puzzle identification numbers match.  If not, mark all as wrong then go to next piece</span>
                <span class="k">if</span> <span class="n">piece</span><span class="o">.</span><span class="n">actual_puzzle_id</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">puzzle_id</span><span class="p">:</span>
                    <span class="c1"># neighbor_accuracy_info.wrong_puzzle_id += 1</span>
                    <span class="n">neighbor_accuracy_info</span><span class="o">.</span><span class="n">add_wrong_puzzle_id</span><span class="p">(</span><span class="n">piece</span><span class="o">.</span><span class="n">id_number</span><span class="p">,</span> <span class="n">side</span><span class="p">)</span>
                    <span class="k">continue</span>

                <span class="c1"># Extract the placed piece ID.  If a cell is empty or does not exist, mark it as None</span>
                <span class="n">neighbor_loc</span> <span class="o">=</span> <span class="n">neighbor_location_and_sides</span><span class="p">[</span><span class="n">side_numb</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                <span class="c1"># Check the location is invalid.  If it is, mark the location as None.</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">neighbor_loc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">neighbor_loc</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">0</span>
                       <span class="ow">or</span> <span class="n">neighbor_loc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">puzzle</span><span class="o">.</span><span class="n">grid_size</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">or</span> <span class="n">neighbor_loc</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">puzzle</span><span class="o">.</span><span class="n">grid_size</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>

                    <span class="n">placed_piece_id</span> <span class="o">=</span> <span class="bp">None</span>
                <span class="c1"># Handle dimensions that are off the edge of the board</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="c1"># Get the placed piece number</span>
                    <span class="n">placed_piece_id</span> <span class="o">=</span> <span class="n">placed_piece_matrix</span><span class="p">[</span><span class="n">neighbor_loc</span><span class="p">]</span>
                    <span class="c1"># Handle missing pieces</span>
                    <span class="n">placed_piece_id</span> <span class="o">=</span> <span class="n">placed_piece_id</span> <span class="k">if</span> <span class="n">placed_piece_id</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="k">else</span> <span class="bp">None</span>

                <span class="c1"># Check if the neighbor if the neighbor</span>
                <span class="k">if</span><span class="p">(</span><span class="n">placed_piece_id</span> <span class="o">==</span> <span class="n">original_neighbor_id_and_sides</span><span class="p">[</span><span class="n">side_numb</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                   <span class="ow">and</span> <span class="p">(</span><span class="n">original_neighbor_id_and_sides</span><span class="p">[</span><span class="n">side_numb</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">or</span>
                        <span class="n">piece</span><span class="o">.</span><span class="n">rotation</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="n">rotation_matrix</span><span class="p">[</span><span class="n">neighbor_location_and_sides</span><span class="p">[</span><span class="n">side_numb</span><span class="p">][</span><span class="mi">0</span><span class="p">]])):</span>

                    <span class="c1"># neighbor_accuracy_info.correct_neighbor_count += 1</span>
                    <span class="n">neighbor_accuracy_info</span><span class="o">.</span><span class="n">add_correct_neighbor</span><span class="p">(</span><span class="n">piece</span><span class="o">.</span><span class="n">id_number</span><span class="p">,</span> <span class="n">side</span><span class="p">)</span>

                <span class="c1"># Mark neighbor as incorrect</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="c1"># neighbor_accuracy_info.wrong_neighbor_count += 1</span>
                    <span class="n">neighbor_accuracy_info</span><span class="o">.</span><span class="n">add_wrong_neighbor</span><span class="p">(</span><span class="n">piece</span><span class="o">.</span><span class="n">id_number</span><span class="p">,</span> <span class="n">side</span><span class="p">)</span>

        <span class="c1"># Update the best accuracy should be updated.</span>
        <span class="k">if</span> <span class="n">ModifiedNeighborAccuracy</span><span class="o">.</span><span class="n">check_if_update_neighbor_accuracy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">modified_neighbor_accuracy</span><span class="p">,</span>
                                                                      <span class="n">neighbor_accuracy_info</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">modified_neighbor_accuracy</span> <span class="o">=</span> <span class="n">neighbor_accuracy_info</span></div>

<div class="viewcode-block" id="PuzzleResultsInformation.resolve_direct_accuracies"><a class="viewcode-back" href="../../hammoudeh_puzzle_solver.html#hammoudeh_puzzle_solver.puzzle_importer.PuzzleResultsInformation.resolve_direct_accuracies">[docs]</a>    <span class="k">def</span> <span class="nf">resolve_direct_accuracies</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">puzzle</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Direct Accuracy Resolver</span>

<span class="sd">        In the case of multiple puzzles, there will be multiple direct accuracies for each</span>

<span class="sd">        Args:</span>
<span class="sd">            puzzle (Puzzle): A solved puzzle</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># Get the standard direct accuracy</span>
        <span class="n">new_direct_accuracy</span> <span class="o">=</span> <span class="n">puzzle</span><span class="o">.</span><span class="n">determine_standard_direct_accuracy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">puzzle_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">numb_pieces</span><span class="p">)</span>

        <span class="c1"># Update the stored standard direct accuracy if applicable</span>
        <span class="k">if</span> <span class="n">DirectAccuracyPuzzleResults</span><span class="o">.</span><span class="n">check_if_update_direct_accuracy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">standard_direct_accuracy</span><span class="p">,</span>
                                                                       <span class="n">new_direct_accuracy</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">standard_direct_accuracy</span> <span class="o">=</span> <span class="n">new_direct_accuracy</span>

        <span class="c1"># Modified direct accuracy is a more complicated procedure so it runs separately</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_resolve_modified_direct_accuracy</span><span class="p">(</span><span class="n">puzzle</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_resolve_modified_direct_accuracy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">puzzle</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Modified Direct Accuracy Resolver</span>

<span class="sd">        Specially resolves the modified direct accuracy.  This is required as as the upper left coordinate(s) need</span>
<span class="sd">        to be found.</span>

<span class="sd">        Simplified Algorithm Flow:</span>
<span class="sd">        * Find the piece(s) that have the minimum MANHATTAN distance from the upper left corner of the puzzle (i.e.</span>
<span class="sd">        location (0, 0)</span>

<span class="sd">        * Use any possible piece location that is within that manhattan distance as a reference point for calculating</span>
<span class="sd">        the direct accuracy.</span>

<span class="sd">        Args:</span>
<span class="sd">            puzzle (Puzzle): A puzzle object whose direct accuracy is being determined.</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># Placed piece array</span>
        <span class="n">placed_piece_matrix</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">puzzle</span><span class="o">.</span><span class="n">build_placed_piece_info</span><span class="p">()</span>

        <span class="c1"># Do a Breadth first search to define the possible candidates for modified direct method</span>
        <span class="n">frontier_set</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)]</span>
        <span class="n">explored_set</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">found_dist</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="c1"># Continue searching until either</span>
        <span class="k">while</span> <span class="n">found_dist</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">or</span> <span class="p">(</span><span class="n">frontier_set</span> <span class="ow">and</span> <span class="n">frontier_set</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">frontier_set</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">found_dist</span><span class="p">):</span>
            <span class="c1"># Pop an element from the front of the list and add it to the explored set</span>
            <span class="n">next_loc</span> <span class="o">=</span> <span class="n">frontier_set</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="n">explored_set</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">next_loc</span><span class="p">)</span>

            <span class="c1"># Check if there is a piece in the current location</span>
            <span class="k">if</span> <span class="n">found_dist</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">placed_piece_matrix</span><span class="p">[</span><span class="n">next_loc</span><span class="p">]</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                <span class="n">found_dist</span> <span class="o">=</span> <span class="n">next_loc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">next_loc</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>  <span class="c1"># Use the manhattan distance</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># Move one piece down</span>
                <span class="n">down_loc</span> <span class="o">=</span> <span class="p">(</span><span class="n">next_loc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">next_loc</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                <span class="c1"># Only need to check first dimension since only one that changed</span>
                <span class="k">if</span> <span class="n">down_loc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">puzzle</span><span class="o">.</span><span class="n">grid_size</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">and</span> <span class="n">down_loc</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">explored_set</span> <span class="ow">and</span> <span class="n">down_loc</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">frontier_set</span><span class="p">:</span>
                    <span class="n">frontier_set</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">down_loc</span><span class="p">)</span>

                <span class="c1"># Move one piece to the right</span>
                <span class="n">right_loc</span> <span class="o">=</span> <span class="p">(</span><span class="n">next_loc</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">next_loc</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
                <span class="c1"># Only need to check second dimension since only one that changed</span>
                <span class="k">if</span> <span class="n">right_loc</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">puzzle</span><span class="o">.</span><span class="n">grid_size</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">and</span> <span class="n">right_loc</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">explored_set</span> <span class="ow">and</span> <span class="n">right_loc</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">frontier_set</span><span class="p">:</span>
                    <span class="n">frontier_set</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">right_loc</span><span class="p">)</span>

        <span class="c1"># For all upper left coordinate candidates, determine the modified direct accuracy.</span>
        <span class="k">for</span> <span class="n">possible_upper_left</span> <span class="ow">in</span> <span class="n">explored_set</span><span class="p">:</span>
            <span class="n">modified_direct_accuracy</span> <span class="o">=</span> <span class="n">puzzle</span><span class="o">.</span><span class="n">determine_modified_direct_accuracy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">puzzle_id</span><span class="p">,</span>
                                                                                 <span class="n">possible_upper_left</span><span class="p">,</span>
                                                                                 <span class="bp">self</span><span class="o">.</span><span class="n">numb_pieces</span><span class="p">)</span>
            <span class="c1"># Update the standard direct accuracy</span>
            <span class="k">if</span> <span class="n">DirectAccuracyPuzzleResults</span><span class="o">.</span><span class="n">check_if_update_direct_accuracy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">modified_direct_accuracy</span><span class="p">,</span>
                                                                           <span class="n">modified_direct_accuracy</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">modified_direct_accuracy</span> <span class="o">=</span> <span class="n">modified_direct_accuracy</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">original_filename</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Property for accessing an image&#39;s filename.</span>

<span class="sd">        Returns (str): Original filename of the input image</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_original_filename</span></div>


<div class="viewcode-block" id="PieceDirectAccuracyResult"><a class="viewcode-back" href="../../hammoudeh_puzzle_solver.html#hammoudeh_puzzle_solver.puzzle_importer.PieceDirectAccuracyResult">[docs]</a><span class="k">class</span> <span class="nc">PieceDirectAccuracyResult</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Enumerated type used to represent the direct accuracy results for a single individual piece.  Each enumerated</span>
<span class="sd">    value is a tuple representing the color of the puzzle piece in BGR format.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">different_puzzle</span> <span class="o">=</span> <span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>  <span class="c1"># Blue</span>
    <span class="n">correct_placement</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">204</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>  <span class="c1"># Green</span>
    <span class="n">wrong_location</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">)</span>  <span class="c1"># Red</span>
    <span class="n">wrong_rotation</span> <span class="o">=</span> <span class="p">(</span><span class="mi">51</span><span class="p">,</span> <span class="mi">153</span><span class="p">,</span> <span class="mi">255</span><span class="p">)</span>  <span class="c1"># Orange</span></div>


<div class="viewcode-block" id="DirectAccuracyPuzzleResults"><a class="viewcode-back" href="../../hammoudeh_puzzle_solver.html#hammoudeh_puzzle_solver.puzzle_importer.DirectAccuracyPuzzleResults">[docs]</a><span class="k">class</span> <span class="nc">DirectAccuracyPuzzleResults</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Structure used for managing puzzle placement results.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">original_puzzle_id</span><span class="p">,</span> <span class="n">solved_puzzle_id</span><span class="p">,</span> <span class="n">numb_pieces_in_original_puzzle</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_orig_puzzle_id</span> <span class="o">=</span> <span class="n">original_puzzle_id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_solved_puzzle_id</span> <span class="o">=</span> <span class="n">solved_puzzle_id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_different_puzzle</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">numb_pieces_in_original_puzzle</span> <span class="o">=</span> <span class="n">numb_pieces_in_original_puzzle</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_wrong_location</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_wrong_rotation</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_correct_placement</span> <span class="o">=</span> <span class="p">{}</span>

<div class="viewcode-block" id="DirectAccuracyPuzzleResults.get_piece_result"><a class="viewcode-back" href="../../hammoudeh_puzzle_solver.html#hammoudeh_puzzle_solver.puzzle_importer.DirectAccuracyPuzzleResults.get_piece_result">[docs]</a>    <span class="k">def</span> <span class="nf">get_piece_result</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">piece_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the direct accuracy results (e.g. wrong puzzle, wrong id, wrong rotation, etc.) for an individual</span>
<span class="sd">        piece.</span>

<span class="sd">        Args:</span>
<span class="sd">            piece_id (int): Identification number of the piece</span>

<span class="sd">        Returns (PieceDirectAccuracyResult): Direct accuracy result for an individual piece</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">key</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">piece_id</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_correct_placement</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">PieceDirectAccuracyResult</span><span class="o">.</span><span class="n">correct_placement</span>

        <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wrong_rotation</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">PieceDirectAccuracyResult</span><span class="o">.</span><span class="n">wrong_rotation</span>

        <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wrong_location</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">PieceDirectAccuracyResult</span><span class="o">.</span><span class="n">wrong_location</span>

        <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_different_puzzle</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">PieceDirectAccuracyResult</span><span class="o">.</span><span class="n">different_puzzle</span>

        <span class="c1"># Piece does not exist in the results so raise an error</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Piece id: </span><span class="se">\&quot;</span><span class="si">%d</span><span class="se">\&quot;</span><span class="s2"> does not exist in this result set.&quot;</span> <span class="o">%</span> <span class="n">piece_id</span><span class="p">)</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">original_puzzle_id</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Direct Accuracy Original Puzzle ID Number Accessor</span>

<span class="sd">        Returns (int): The puzzle ID associated with the ORIGINAL set of puzzle results</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_orig_puzzle_id</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">solved_puzzle_id</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Direct Accuracy Solved Puzzle ID Number Accessor</span>

<span class="sd">        Returns (int): The puzzle ID associated with the SOLVED set of puzzle pieces</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_solved_puzzle_id</span>

<div class="viewcode-block" id="DirectAccuracyPuzzleResults.add_wrong_location"><a class="viewcode-back" href="../../hammoudeh_puzzle_solver.html#hammoudeh_puzzle_solver.puzzle_importer.DirectAccuracyPuzzleResults.add_wrong_location">[docs]</a>    <span class="k">def</span> <span class="nf">add_wrong_location</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">piece</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Wrong Piece Location Tracker</span>

<span class="sd">        Adds a piece that was assigned to the wrong location number to the tracker.</span>

<span class="sd">        Args:</span>
<span class="sd">            piece (PuzzlePiece): Piece placed in the wrong LOCATION</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_wrong_location</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">piece</span><span class="o">.</span><span class="n">id_number</span><span class="p">)]</span> <span class="o">=</span> <span class="n">piece</span></div>

<div class="viewcode-block" id="DirectAccuracyPuzzleResults.add_different_puzzle"><a class="viewcode-back" href="../../hammoudeh_puzzle_solver.html#hammoudeh_puzzle_solver.puzzle_importer.DirectAccuracyPuzzleResults.add_different_puzzle">[docs]</a>    <span class="k">def</span> <span class="nf">add_different_puzzle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">piece</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Wrong Puzzle ID Tracker</span>

<span class="sd">        Adds a piece that was assigned to a DIFFERENT PUZZLE ID number to the tracker.</span>

<span class="sd">        Args:</span>
<span class="sd">            piece (PuzzlePiece): Puzzle Piece that was placed with the different PUZZLE IDENTIFICATION NUMBER</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_different_puzzle</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">piece</span><span class="o">.</span><span class="n">id_number</span><span class="p">)]</span> <span class="o">=</span> <span class="n">piece</span></div>

<div class="viewcode-block" id="DirectAccuracyPuzzleResults.add_wrong_rotation"><a class="viewcode-back" href="../../hammoudeh_puzzle_solver.html#hammoudeh_puzzle_solver.puzzle_importer.DirectAccuracyPuzzleResults.add_wrong_rotation">[docs]</a>    <span class="k">def</span> <span class="nf">add_wrong_rotation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">piece</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Wrong Piece Rotation Tracker</span>

<span class="sd">        Adds a piece that had the wrong rotation</span>

<span class="sd">        Args:</span>
<span class="sd">            piece (PuzzlePiece): Puzzle Piece that was placed with the wrong Rotation (i.e. not 0 degrees)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_wrong_rotation</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">piece</span><span class="o">.</span><span class="n">id_number</span><span class="p">)]</span> <span class="o">=</span> <span class="n">piece</span></div>

<div class="viewcode-block" id="DirectAccuracyPuzzleResults.add_correct_placement"><a class="viewcode-back" href="../../hammoudeh_puzzle_solver.html#hammoudeh_puzzle_solver.puzzle_importer.DirectAccuracyPuzzleResults.add_correct_placement">[docs]</a>    <span class="k">def</span> <span class="nf">add_correct_placement</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">piece</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Correctly Placed Piece Tracker</span>

<span class="sd">        Adds a piece that has been placed correctly</span>

<span class="sd">        Args:</span>
<span class="sd">            piece (PuzzlePiece): Puzzle Piece that was placed CORRECTLY.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_correct_placement</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">piece</span><span class="o">.</span><span class="n">id_number</span><span class="p">)]</span> <span class="o">=</span> <span class="n">piece</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">weighted_accuracy</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates and returns the weighted accuracy score for this puzzle.</span>

<span class="sd">        Returns (float): Weighted accuracy score for this puzzle solution</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="mf">1.0</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">numb_correct_placements</span> <span class="o">/</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">numb_pieces_in_original_puzzle</span>
                                                     <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">numb_different_puzzle</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">numb_correct_placements</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Number of Pieces Placed Correctly Property</span>

<span class="sd">        Gets the number of pieces placed correctly.</span>

<span class="sd">        Returns (int): Number of pieces correctly placed with the right puzzle ID, location, and rotation.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_correct_placement</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">numb_wrong_location</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Number of Pieces Placed in the Wrong Location</span>

<span class="sd">        Gets the number of pieces placed in the wrong LOCATION.</span>

<span class="sd">        Returns (int): Number of pieces placed in the wrong location.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_wrong_location</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">numb_wrong_rotation</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Number of Pieces with the Wrong Rotation</span>

<span class="sd">        Gets the number of pieces placed with the wrong ROTATION.</span>

<span class="sd">        Returns (int): Number of pieces placed with the incorrect rotation (i.e. not 0 degrees)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_wrong_rotation</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">numb_different_puzzle</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Number of Pieces in the Wrong Puzzle</span>

<span class="sd">        Gets the number of pieces placed in entirely the wrong puzzle.</span>

<span class="sd">        Returns (int): Number of pieces placed in the wrong puzzle</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_different_puzzle</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">total_numb_pieces_in_solved_puzzle</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Total Number of Pieces in the solved image</span>

<span class="sd">        Returns (int): Total number of pieces (both with expected puzzle id and wrong puzzle id(s))</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">numb_pieces_from_original_puzzle_in_solved_puzzle</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">numb_different_puzzle</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">numb_pieces_from_original_puzzle_in_solved_puzzle</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Number of pieces from the original puzzle in the solved result</span>

<span class="sd">        Returns (int): Only the number of included pieces</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">numb_correct_placements</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">numb_wrong_location</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">numb_wrong_rotation</span>

    <span class="nd">@staticmethod</span>
<div class="viewcode-block" id="DirectAccuracyPuzzleResults.check_if_update_direct_accuracy"><a class="viewcode-back" href="../../hammoudeh_puzzle_solver.html#hammoudeh_puzzle_solver.puzzle_importer.DirectAccuracyPuzzleResults.check_if_update_direct_accuracy">[docs]</a>    <span class="k">def</span> <span class="nf">check_if_update_direct_accuracy</span><span class="p">(</span><span class="n">current_best_direct_accuracy</span><span class="p">,</span> <span class="n">new_direct_accuracy</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Determines whether the current best direct accuracy should be replaced with a newly calculated direct</span>
<span class="sd">        accuracy.</span>

<span class="sd">        Args:</span>
<span class="sd">            current_best_direct_accuracy (DirectAccuracyPuzzleResults): The best direct accuracy results</span>
<span class="sd">            found so far.</span>

<span class="sd">            new_direct_accuracy (DirectAccuracyPuzzleResults): The newly calculated best direct accuracy</span>

<span class="sd">        Returns (bool):</span>
<span class="sd">            True if the current best direct accuracy should be replaced with the new direct accuracy and False</span>
<span class="sd">            otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># If no best direct accuracy found so far, then just return True</span>
        <span class="k">if</span> <span class="n">current_best_direct_accuracy</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">True</span>

        <span class="c1"># Get the information on the current best result</span>
        <span class="n">best_numb_included_pieces</span> <span class="o">=</span> <span class="n">current_best_direct_accuracy</span><span class="o">.</span><span class="n">numb_pieces_from_original_puzzle_in_solved_puzzle</span>
        <span class="n">best_accuracy</span> <span class="o">=</span> <span class="n">current_best_direct_accuracy</span><span class="o">.</span><span class="n">weighted_accuracy</span>

        <span class="c1"># Get the information on the new direct accuracy result</span>
        <span class="n">new_numb_included_pieces</span> <span class="o">=</span> <span class="n">current_best_direct_accuracy</span><span class="o">.</span><span class="n">numb_pieces_from_original_puzzle_in_solved_puzzle</span>
        <span class="n">new_accuracy</span> <span class="o">=</span> <span class="n">new_direct_accuracy</span><span class="o">.</span><span class="n">weighted_accuracy</span>

        <span class="c1"># Update the standard direct accuracy if applicable</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">best_accuracy</span> <span class="o">&lt;</span> <span class="n">new_accuracy</span> <span class="ow">or</span>
                <span class="p">(</span><span class="n">best_accuracy</span> <span class="o">==</span> <span class="n">new_accuracy</span> <span class="ow">and</span> <span class="n">best_numb_included_pieces</span> <span class="o">&lt;</span> <span class="n">new_numb_included_pieces</span><span class="p">)):</span>
            <span class="k">return</span> <span class="bp">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span></div></div>


<div class="viewcode-block" id="BestBuddyResultsCollection"><a class="viewcode-back" href="../../hammoudeh_puzzle_solver.html#hammoudeh_puzzle_solver.puzzle_importer.BestBuddyResultsCollection">[docs]</a><span class="k">class</span> <span class="nc">BestBuddyResultsCollection</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Stores the best buddy result accuracies in a single object.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">_PERFORM_ASSERT_CHECKS</span> <span class="o">=</span> <span class="bp">True</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_best_buddy_accuracy</span> <span class="o">=</span> <span class="p">[]</span>

<div class="viewcode-block" id="BestBuddyResultsCollection.create_best_buddy_accuracy_for_new_puzzle"><a class="viewcode-back" href="../../hammoudeh_puzzle_solver.html#hammoudeh_puzzle_solver.puzzle_importer.BestBuddyResultsCollection.create_best_buddy_accuracy_for_new_puzzle">[docs]</a>    <span class="k">def</span> <span class="nf">create_best_buddy_accuracy_for_new_puzzle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">puzzle_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a best buddy accuracy for a new puzzle.</span>

<span class="sd">        Args:</span>
<span class="sd">            puzzle_id (int): Creates a new best buddy accuracy for a puzzle</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">new_bb_acc</span> <span class="o">=</span> <span class="n">BestBuddyAccuracy</span><span class="p">(</span><span class="n">puzzle_id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_best_buddy_accuracy</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_bb_acc</span><span class="p">)</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">best_buddy_accuracy</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Property to get access to all the best buddy information.</span>

<span class="sd">        Returns (List[BestBuddyAccuracy]): The best buddy accuracy objects for all puzzles.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_best_buddy_accuracy</span>

    <span class="k">def</span> <span class="nf">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Allows for the iteration over a set of best buddy objects.</span>

<span class="sd">        Returns(List[BestBuddyAccuracy]): The best buddy accuracy objects for all puzzles.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_best_buddy_accuracy</span><span class="p">)):</span>
            <span class="k">yield</span> <span class="bp">self</span><span class="o">.</span><span class="n">_best_buddy_accuracy</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Allows for the indexing of a Best buddy accuracy class</span>

<span class="sd">        Args:</span>
<span class="sd">            key (int): Puzzle id</span>

<span class="sd">        Returns(List[BestBuddyAccuracy]): The best buddy accuracy objects for all puzzles.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_best_buddy_accuracy</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>

<div class="viewcode-block" id="BestBuddyResultsCollection.total_best_buddy_count"><a class="viewcode-back" href="../../hammoudeh_puzzle_solver.html#hammoudeh_puzzle_solver.puzzle_importer.BestBuddyResultsCollection.total_best_buddy_count">[docs]</a>    <span class="k">def</span> <span class="nf">total_best_buddy_count</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the total number of best buddies represented by this collection.</span>

<span class="sd">        Returns (int): Total number of best buddies in the collection</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">bb_count</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">best_buddy_acc</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_best_buddy_accuracy</span><span class="p">:</span>
            <span class="n">bb_count</span> <span class="o">+=</span> <span class="n">best_buddy_acc</span><span class="o">.</span><span class="n">numb_open_best_buddies</span>
            <span class="n">bb_count</span> <span class="o">+=</span> <span class="n">best_buddy_acc</span><span class="o">.</span><span class="n">numb_wrong_best_buddies</span>
            <span class="n">bb_count</span> <span class="o">+=</span> <span class="n">best_buddy_acc</span><span class="o">.</span><span class="n">numb_correct_best_buddies</span>
        <span class="k">return</span> <span class="n">bb_count</span></div>

<div class="viewcode-block" id="BestBuddyResultsCollection.print_results"><a class="viewcode-back" href="../../hammoudeh_puzzle_solver.html#hammoudeh_puzzle_solver.puzzle_importer.BestBuddyResultsCollection.print_results">[docs]</a>    <span class="k">def</span> <span class="nf">print_results</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Prints the best buddy accuracy information to the console.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">print</span> <span class="s2">&quot;Best Buddy Accuracy Information:&quot;</span>
        <span class="k">for</span> <span class="n">bb_acc</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_best_buddy_accuracy</span><span class="p">:</span>
            <span class="k">print</span> <span class="nb">str</span><span class="p">(</span><span class="n">bb_acc</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span></div>

<div class="viewcode-block" id="BestBuddyResultsCollection.output_results_images"><a class="viewcode-back" href="../../hammoudeh_puzzle_solver.html#hammoudeh_puzzle_solver.puzzle_importer.BestBuddyResultsCollection.output_results_images">[docs]</a>    <span class="k">def</span> <span class="nf">output_results_images</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">solved_puzzles</span><span class="p">,</span> <span class="n">puzzle_type</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">,</span> <span class="n">orig_img_filename</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Converts the results information to a data visualization to see where there are right and wrong</span>
<span class="sd">        best buddies.</span>

<span class="sd">        Args:</span>
<span class="sd">            solved_puzzles (List[Puzzle]): List of puzzles.</span>
<span class="sd">            puzzle_type (PuzzleType): Type of the solved puzzle.</span>
<span class="sd">            timestamp (float): Timestamp as a floating point number.  Converted to a string by this function.</span>
<span class="sd">            orig_img_filename (Optional str): Filename of the original image</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># Iterate through each possible and print its BB accuracy information.</span>
        <span class="k">for</span> <span class="n">puzzle_id</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_best_buddy_accuracy</span><span class="p">)):</span>

            <span class="c1"># Get the individual results and puzzle</span>
            <span class="n">puzzle</span> <span class="o">=</span> <span class="n">solved_puzzles</span><span class="p">[</span><span class="n">puzzle_id</span><span class="p">]</span>
            <span class="n">bb_acc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_best_buddy_accuracy</span><span class="p">[</span><span class="n">puzzle_id</span><span class="p">]</span>

            <span class="c1"># Ensure that the puzzle ids match</span>
            <span class="k">if</span> <span class="n">BestBuddyResultsCollection</span><span class="o">.</span><span class="n">_PERFORM_ASSERT_CHECKS</span><span class="p">:</span>
                <span class="k">assert</span> <span class="n">bb_acc</span><span class="o">.</span><span class="n">puzzle_id</span> <span class="o">==</span> <span class="n">puzzle</span><span class="o">.</span><span class="n">id_number</span>

            <span class="c1"># Iterate each puzzle piece and set its color for each side</span>
            <span class="k">for</span> <span class="n">piece</span> <span class="ow">in</span> <span class="n">puzzle</span><span class="o">.</span><span class="n">pieces</span><span class="p">:</span>
                <span class="n">piece</span><span class="o">.</span><span class="n">reset_image_coloring_for_polygons</span><span class="p">()</span>
                <span class="k">for</span> <span class="n">side</span> <span class="ow">in</span> <span class="n">PuzzlePieceSide</span><span class="o">.</span><span class="n">get_all_sides</span><span class="p">():</span>
                    <span class="n">coloring</span> <span class="o">=</span> <span class="n">bb_acc</span><span class="o">.</span><span class="n">get_piece_side_result</span><span class="p">(</span><span class="n">piece</span><span class="o">.</span><span class="n">id_number</span><span class="p">,</span> <span class="n">side</span><span class="p">)</span>
                    <span class="n">piece</span><span class="o">.</span><span class="n">results_image_polygon_coloring</span><span class="p">(</span><span class="n">side</span><span class="p">,</span> <span class="n">coloring</span><span class="p">)</span>

            <span class="c1"># Determine whether the puzzle id should be used in the filename</span>
            <span class="n">filename_puzzle_id</span> <span class="o">=</span> <span class="n">puzzle_id</span> <span class="k">if</span> <span class="n">orig_img_filename</span> <span class="ow">is</span> <span class="bp">None</span> <span class="k">else</span> <span class="bp">None</span>
            <span class="n">descriptor</span> <span class="o">=</span> <span class="s2">&quot;best_buddy_acc&quot;</span>
            <span class="n">output_filename</span> <span class="o">=</span> <span class="n">Puzzle</span><span class="o">.</span><span class="n">make_image_filename</span><span class="p">(</span><span class="n">descriptor</span><span class="p">,</span> <span class="n">Puzzle</span><span class="o">.</span><span class="n">OUTPUT_IMAGE_DIRECTORY</span><span class="p">,</span> <span class="n">puzzle_type</span><span class="p">,</span>
                                                         <span class="n">timestamp</span><span class="p">,</span> <span class="n">orig_img_filename</span><span class="o">=</span><span class="n">orig_img_filename</span><span class="p">,</span>
                                                         <span class="n">puzzle_id</span><span class="o">=</span><span class="n">filename_puzzle_id</span><span class="p">)</span>
            <span class="c1"># Stores the results to a file.</span>
            <span class="n">puzzle</span><span class="o">.</span><span class="n">build_puzzle_image</span><span class="p">(</span><span class="n">use_results_coloring</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
            <span class="n">puzzle</span><span class="o">.</span><span class="n">save_to_file</span><span class="p">(</span><span class="n">output_filename</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="PieceSideBestBuddyAccuracyResult"><a class="viewcode-back" href="../../hammoudeh_puzzle_solver.html#hammoudeh_puzzle_solver.puzzle_importer.PieceSideBestBuddyAccuracyResult">[docs]</a><span class="k">class</span> <span class="nc">PieceSideBestBuddyAccuracyResult</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Enumerated type used to represent the direct accuracy results for a single individual piece.  Each enumerated</span>
<span class="sd">    value is a tuple representing the color of the puzzle piece in BGR format.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">wrong_best_buddy</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">)</span>  <span class="c1"># Red</span>
    <span class="n">correct_best_buddy</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">204</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>  <span class="c1"># Green</span>
    <span class="n">no_best_buddy</span> <span class="o">=</span> <span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">)</span>  <span class="c1"># White</span>
    <span class="n">open_best_buddy</span> <span class="o">=</span> <span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>  <span class="c1"># Blue</span></div>


<div class="viewcode-block" id="BestBuddyAccuracy"><a class="viewcode-back" href="../../hammoudeh_puzzle_solver.html#hammoudeh_puzzle_solver.puzzle_importer.BestBuddyAccuracy">[docs]</a><span class="k">class</span> <span class="nc">BestBuddyAccuracy</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Store the best buddy accuracy information for a single puzzle</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">_PERFORM_ASSERT_CHECK</span> <span class="o">=</span> <span class="bp">True</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">puzzle_id</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">puzzle_id</span> <span class="o">=</span> <span class="n">puzzle_id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_open_best_buddies</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_wrong_best_buddies</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_correct_best_buddies</span> <span class="o">=</span> <span class="p">{}</span>

<div class="viewcode-block" id="BestBuddyAccuracy.add_open_best_buddy"><a class="viewcode-back" href="../../hammoudeh_puzzle_solver.html#hammoudeh_puzzle_solver.puzzle_importer.BestBuddyAccuracy.add_open_best_buddy">[docs]</a>    <span class="k">def</span> <span class="nf">add_open_best_buddy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">piece_id</span><span class="p">,</span> <span class="n">side</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Deletes an unpaired open best buddy from the list</span>

<span class="sd">        Args:</span>
<span class="sd">            piece_id (int): Piece identification number of the as of yet unpaired best buddy</span>
<span class="sd">            side (PuzzlePieceSide): Side of the unpaired best buddy</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">BestBuddyAccuracy</span><span class="o">.</span><span class="n">add_piece_side_tuple_to_dict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_open_best_buddies</span><span class="p">,</span> <span class="n">piece_id</span><span class="p">,</span> <span class="n">side</span><span class="p">)</span></div>

<div class="viewcode-block" id="BestBuddyAccuracy.delete_open_best_buddy"><a class="viewcode-back" href="../../hammoudeh_puzzle_solver.html#hammoudeh_puzzle_solver.puzzle_importer.BestBuddyAccuracy.delete_open_best_buddy">[docs]</a>    <span class="k">def</span> <span class="nf">delete_open_best_buddy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">piece_id</span><span class="p">,</span> <span class="n">side</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds an unpaired open best buddy to the list</span>

<span class="sd">        Args:</span>
<span class="sd">            piece_id (int): Piece identification number of the as of yet unpaired best buddy</span>
<span class="sd">            side (PuzzlePieceSide): Side of the unpaired best buddy</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">exists_open_best_buddy</span><span class="p">(</span><span class="n">piece_id</span><span class="p">,</span> <span class="n">side</span><span class="p">):</span>
            <span class="n">key</span> <span class="o">=</span> <span class="n">BestBuddyAccuracy</span><span class="o">.</span><span class="n">piece_side_tuple_key</span><span class="p">(</span><span class="n">piece_id</span><span class="p">,</span> <span class="n">side</span><span class="p">)</span>
            <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_open_best_buddies</span><span class="p">[</span><span class="n">key</span><span class="p">]</span></div>

<div class="viewcode-block" id="BestBuddyAccuracy.exists_open_best_buddy"><a class="viewcode-back" href="../../hammoudeh_puzzle_solver.html#hammoudeh_puzzle_solver.puzzle_importer.BestBuddyAccuracy.exists_open_best_buddy">[docs]</a>    <span class="k">def</span> <span class="nf">exists_open_best_buddy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">piece_id</span><span class="p">,</span> <span class="n">side</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Checks if a pairing of a piece identification number and side exists in the pool of open best buddies.</span>

<span class="sd">        Args:</span>
<span class="sd">            piece_id (int): Piece identification number</span>
<span class="sd">            side (PuzzlePieceSide): Possible neighbor side</span>

<span class="sd">        Returns (bool): True if the key is in the dictionary and False otherwise.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">BestBuddyAccuracy</span><span class="o">.</span><span class="n">check_if_piece_side_tuple_in_dict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_open_best_buddies</span><span class="p">,</span> <span class="n">piece_id</span><span class="p">,</span> <span class="n">side</span><span class="p">)</span></div>

<div class="viewcode-block" id="BestBuddyAccuracy.exists_wrong_best_buddy"><a class="viewcode-back" href="../../hammoudeh_puzzle_solver.html#hammoudeh_puzzle_solver.puzzle_importer.BestBuddyAccuracy.exists_wrong_best_buddy">[docs]</a>    <span class="k">def</span> <span class="nf">exists_wrong_best_buddy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">piece_id</span><span class="p">,</span> <span class="n">side</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Checks if a pairing of a piece identification number and side exists in the pool of WRONG best buddies.</span>

<span class="sd">        Args:</span>
<span class="sd">            piece_id (int): Piece identification number</span>
<span class="sd">            side (PuzzlePieceSide): Possible neighbor side</span>

<span class="sd">        Returns (bool): True if the key is in the dictionary and False otherwise.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">BestBuddyAccuracy</span><span class="o">.</span><span class="n">check_if_piece_side_tuple_in_dict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_wrong_best_buddies</span><span class="p">,</span> <span class="n">piece_id</span><span class="p">,</span> <span class="n">side</span><span class="p">)</span></div>

<div class="viewcode-block" id="BestBuddyAccuracy.add_wrong_best_buddy"><a class="viewcode-back" href="../../hammoudeh_puzzle_solver.html#hammoudeh_puzzle_solver.puzzle_importer.BestBuddyAccuracy.add_wrong_best_buddy">[docs]</a>    <span class="k">def</span> <span class="nf">add_wrong_best_buddy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">piece_id</span><span class="p">,</span> <span class="n">side</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">            Args:</span>
<span class="sd">                piece_id (int):</span>
<span class="sd">                side (PuzzlePieceSide):</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">BestBuddyAccuracy</span><span class="o">.</span><span class="n">add_piece_side_tuple_to_dict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_wrong_best_buddies</span><span class="p">,</span> <span class="n">piece_id</span><span class="p">,</span> <span class="n">side</span><span class="p">)</span></div>

<div class="viewcode-block" id="BestBuddyAccuracy.exists_correct_best_buddy"><a class="viewcode-back" href="../../hammoudeh_puzzle_solver.html#hammoudeh_puzzle_solver.puzzle_importer.BestBuddyAccuracy.exists_correct_best_buddy">[docs]</a>    <span class="k">def</span> <span class="nf">exists_correct_best_buddy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">piece_id</span><span class="p">,</span> <span class="n">side</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Checks if a pairing of a piece identification number and side exists in the pool of CORRECT best buddies.</span>

<span class="sd">        Args:</span>
<span class="sd">            piece_id (int): Piece identification number</span>
<span class="sd">            side (PuzzlePieceSide): Possible neighbor side</span>

<span class="sd">        Returns (bool): True if the key is in the dictionary and False otherwise.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">BestBuddyAccuracy</span><span class="o">.</span><span class="n">check_if_piece_side_tuple_in_dict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_correct_best_buddies</span><span class="p">,</span> <span class="n">piece_id</span><span class="p">,</span> <span class="n">side</span><span class="p">)</span></div>

<div class="viewcode-block" id="BestBuddyAccuracy.add_correct_best_buddy"><a class="viewcode-back" href="../../hammoudeh_puzzle_solver.html#hammoudeh_puzzle_solver.puzzle_importer.BestBuddyAccuracy.add_correct_best_buddy">[docs]</a>    <span class="k">def</span> <span class="nf">add_correct_best_buddy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">piece_id</span><span class="p">,</span> <span class="n">side</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Side of the piece where the BB is being referred.</span>

<span class="sd">        Args:</span>
<span class="sd">            piece_id (int): Identification number ofr the piece of interest</span>
<span class="sd">            side (PuzzlePieceSide): Puzzle piece side of reference for the correct best buddy</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">BestBuddyAccuracy</span><span class="o">.</span><span class="n">add_piece_side_tuple_to_dict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_correct_best_buddies</span><span class="p">,</span> <span class="n">piece_id</span><span class="p">,</span> <span class="n">side</span><span class="p">)</span></div>

<div class="viewcode-block" id="BestBuddyAccuracy.get_piece_side_result"><a class="viewcode-back" href="../../hammoudeh_puzzle_solver.html#hammoudeh_puzzle_solver.puzzle_importer.BestBuddyAccuracy.get_piece_side_result">[docs]</a>    <span class="k">def</span> <span class="nf">get_piece_side_result</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">piece_id</span><span class="p">,</span> <span class="n">side</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the best buddy result for the combination of puzzle piece and side.</span>

<span class="sd">        Args:</span>
<span class="sd">            piece_id (int): Identification number of the piece</span>
<span class="sd">            side (PuzzlePieceSide): Side of the puzzle piece of puzzle piece of interest</span>

<span class="sd">        Returns (PieceSideBestBuddyAccuracyResult): Best buddy accuracy result</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">exists_wrong_best_buddy</span><span class="p">(</span><span class="n">piece_id</span><span class="p">,</span> <span class="n">side</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">PieceSideBestBuddyAccuracyResult</span><span class="o">.</span><span class="n">wrong_best_buddy</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">exists_correct_best_buddy</span><span class="p">(</span><span class="n">piece_id</span><span class="p">,</span> <span class="n">side</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">PieceSideBestBuddyAccuracyResult</span><span class="o">.</span><span class="n">correct_best_buddy</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">exists_open_best_buddy</span><span class="p">(</span><span class="n">piece_id</span><span class="p">,</span> <span class="n">side</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">PieceSideBestBuddyAccuracyResult</span><span class="o">.</span><span class="n">open_best_buddy</span>

        <span class="c1"># Piece does not have a best buddy</span>
        <span class="k">return</span> <span class="n">PieceSideBestBuddyAccuracyResult</span><span class="o">.</span><span class="n">no_best_buddy</span></div>

    <span class="nd">@staticmethod</span>
<div class="viewcode-block" id="BestBuddyAccuracy.add_piece_side_tuple_to_dict"><a class="viewcode-back" href="../../hammoudeh_puzzle_solver.html#hammoudeh_puzzle_solver.puzzle_importer.BestBuddyAccuracy.add_piece_side_tuple_to_dict">[docs]</a>    <span class="k">def</span> <span class="nf">add_piece_side_tuple_to_dict</span><span class="p">(</span><span class="n">bb_dict</span><span class="p">,</span> <span class="n">piece_id</span><span class="p">,</span> <span class="n">side</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a best buddy information to the specified best buddy dictionary.</span>

<span class="sd">        Args:</span>
<span class="sd">            bb_dict (dict): Dictionary containing best buddy information</span>
<span class="sd">            piece_id (int): Identification number of the piece</span>
<span class="sd">            side (PuzzlePieceSide): Side of the piece that is referred to for best buddy.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">key</span> <span class="o">=</span> <span class="n">BestBuddyAccuracy</span><span class="o">.</span><span class="n">piece_side_tuple_key</span><span class="p">(</span><span class="n">piece_id</span><span class="p">,</span> <span class="n">side</span><span class="p">)</span>
        <span class="n">bb_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">piece_id</span><span class="p">,</span> <span class="n">side</span><span class="p">)</span></div>

    <span class="nd">@staticmethod</span>
<div class="viewcode-block" id="BestBuddyAccuracy.check_if_piece_side_tuple_in_dict"><a class="viewcode-back" href="../../hammoudeh_puzzle_solver.html#hammoudeh_puzzle_solver.puzzle_importer.BestBuddyAccuracy.check_if_piece_side_tuple_in_dict">[docs]</a>    <span class="k">def</span> <span class="nf">check_if_piece_side_tuple_in_dict</span><span class="p">(</span><span class="n">bb_dict</span><span class="p">,</span> <span class="n">piece_id</span><span class="p">,</span> <span class="n">side</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Checks whether the piece and side exists in the specified best buddy dictionary.</span>

<span class="sd">        Args:</span>
<span class="sd">            bb_dict (dict): Best buddy information dictionary</span>
<span class="sd">            piece_id (int): Identification number for the piece</span>
<span class="sd">            side (PuzzlePieceSide): Side of the piece where the BB is being referred.</span>

<span class="sd">        Returns (bool):</span>
<span class="sd">        True if the pairing of piece_id and side exists in the BB dictionary.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">key</span> <span class="o">=</span> <span class="n">BestBuddyAccuracy</span><span class="o">.</span><span class="n">piece_side_tuple_key</span><span class="p">(</span><span class="n">piece_id</span><span class="p">,</span> <span class="n">side</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">bb_dict</span></div>

    <span class="nd">@staticmethod</span>
<div class="viewcode-block" id="BestBuddyAccuracy.piece_side_tuple_key"><a class="viewcode-back" href="../../hammoudeh_puzzle_solver.html#hammoudeh_puzzle_solver.puzzle_importer.BestBuddyAccuracy.piece_side_tuple_key">[docs]</a>    <span class="k">def</span> <span class="nf">piece_side_tuple_key</span><span class="p">(</span><span class="n">piece_id</span><span class="p">,</span> <span class="n">side</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        Args:</span>
<span class="sd">            piece_id (int):</span>
<span class="sd">            side (PuzzlePieceSide):</span>

<span class="sd">        Returns (string):</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">piece_id</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;_&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">side</span><span class="o">.</span><span class="n">value</span><span class="p">)</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">numb_open_best_buddies</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        Returns (int): Total number of best buddies whose best buddies have not yet been placed.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_open_best_buddies</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">numb_correct_best_buddies</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the number of correct best buddies who are next to their best buddy</span>

<span class="sd">        Returns (int): Total number of correct best buddies</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_correct_best_buddies</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">numb_wrong_best_buddies</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the number of correct best buddies who are NOT next to their best buddy</span>

<span class="sd">        Returns (int): Total number of WRONG best buddies</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_wrong_best_buddies</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__unicode__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Constructs the best buddy accuracy information as a string</span>

<span class="sd">        Returns (string): Best Buddy accuracy as a string</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;Best Buddy Info for Solved Puzzle #</span><span class="si">%s</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">puzzle_id</span> \
               <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">Numb Open Best Buddies:</span><span class="se">\t\t</span><span class="si">%s</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">numb_open_best_buddies</span> \
               <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">Numb Correct Best Buddies:</span><span class="se">\t</span><span class="si">%s</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">numb_correct_best_buddies</span> \
               <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">Numb Wrong Best Buddies:</span><span class="se">\t</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">numb_wrong_best_buddies</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">unicode</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span></div>


<div class="viewcode-block" id="PieceSideNeighborAccuracyResult"><a class="viewcode-back" href="../../hammoudeh_puzzle_solver.html#hammoudeh_puzzle_solver.puzzle_importer.PieceSideNeighborAccuracyResult">[docs]</a><span class="k">class</span> <span class="nc">PieceSideNeighborAccuracyResult</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Defines the color for tuples of piece ids and sides according to the neighbor accuracy metric.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">correct_neighbor</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">204</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>  <span class="c1"># Green</span>
    <span class="n">wrong_neighbor</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">)</span>  <span class="c1"># Red</span>
    <span class="n">different_puzzle_id</span> <span class="o">=</span> <span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>  <span class="c1"># Blue</span></div>


<div class="viewcode-block" id="ModifiedNeighborAccuracy"><a class="viewcode-back" href="../../hammoudeh_puzzle_solver.html#hammoudeh_puzzle_solver.puzzle_importer.ModifiedNeighborAccuracy">[docs]</a><span class="k">class</span> <span class="nc">ModifiedNeighborAccuracy</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Encapsulating structure for the modified neighbor based accuracy approach.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">original_puzzle_id</span><span class="p">,</span> <span class="n">solved_puzzle_id</span><span class="p">,</span> <span class="n">number_of_pieces</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_original_puzzle_id</span> <span class="o">=</span> <span class="n">original_puzzle_id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_solved_puzzle_id</span> <span class="o">=</span> <span class="n">solved_puzzle_id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_actual_number_of_pieces</span> <span class="o">=</span> <span class="n">number_of_pieces</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_wrong_puzzle_id</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_correct_neighbors</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_wrong_neighbors</span> <span class="o">=</span> <span class="p">{}</span>

<div class="viewcode-block" id="ModifiedNeighborAccuracy.get_piece_side_result"><a class="viewcode-back" href="../../hammoudeh_puzzle_solver.html#hammoudeh_puzzle_solver.puzzle_importer.ModifiedNeighborAccuracy.get_piece_side_result">[docs]</a>    <span class="k">def</span> <span class="nf">get_piece_side_result</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">piece_id</span><span class="p">,</span> <span class="n">side</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the best buddy result for the combination of puzzle piece and side.</span>

<span class="sd">        Args:</span>
<span class="sd">            piece_id (int): Identification number of the piece</span>
<span class="sd">            side (PuzzlePieceSide): Side of the puzzle piece of puzzle piece of interest</span>

<span class="sd">        Returns (PieceSideBestBuddyAccuracyResult): Best buddy accuracy result</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">exists_wrong_puzzle_id</span><span class="p">(</span><span class="n">piece_id</span><span class="p">,</span> <span class="n">side</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">PieceSideNeighborAccuracyResult</span><span class="o">.</span><span class="n">different_puzzle_id</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">exists_correct_neighbor</span><span class="p">(</span><span class="n">piece_id</span><span class="p">,</span> <span class="n">side</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">PieceSideNeighborAccuracyResult</span><span class="o">.</span><span class="n">correct_neighbor</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">exists_wrong_neighbor</span><span class="p">(</span><span class="n">piece_id</span><span class="p">,</span> <span class="n">side</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">PieceSideNeighborAccuracyResult</span><span class="o">.</span><span class="n">wrong_neighbor</span>

        <span class="c1"># Piece does not have a best buddy</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Pairing of piece id </span><span class="se">\&quot;</span><span class="si">%s</span><span class="se">\&quot;</span><span class="s2"> and side </span><span class="se">\&quot;</span><span class="si">%s</span><span class="se">\&quot;</span><span class="s2"> does not exist in this puzzle&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">piece_id</span><span class="p">,</span>
                                                                                                       <span class="n">side</span><span class="o">.</span><span class="n">side_name</span><span class="p">))</span></div>

<div class="viewcode-block" id="ModifiedNeighborAccuracy.add_wrong_puzzle_id"><a class="viewcode-back" href="../../hammoudeh_puzzle_solver.html#hammoudeh_puzzle_solver.puzzle_importer.ModifiedNeighborAccuracy.add_wrong_puzzle_id">[docs]</a>    <span class="k">def</span> <span class="nf">add_wrong_puzzle_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">piece_id</span><span class="p">,</span> <span class="n">side</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Stores information on piece assigned to the wrong puzzle ID.</span>

<span class="sd">        Args:</span>
<span class="sd">            piece_id (int): Identification number of the wrong puzzle piece</span>
<span class="sd">            side (PuzzlePieceSide): Side of the puzzle piece with the wrong neighbor</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">BestBuddyAccuracy</span><span class="o">.</span><span class="n">add_piece_side_tuple_to_dict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_wrong_puzzle_id</span><span class="p">,</span> <span class="n">piece_id</span><span class="p">,</span> <span class="n">side</span><span class="p">)</span></div>

<div class="viewcode-block" id="ModifiedNeighborAccuracy.exists_wrong_puzzle_id"><a class="viewcode-back" href="../../hammoudeh_puzzle_solver.html#hammoudeh_puzzle_solver.puzzle_importer.ModifiedNeighborAccuracy.exists_wrong_puzzle_id">[docs]</a>    <span class="k">def</span> <span class="nf">exists_wrong_puzzle_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">piece_id</span><span class="p">,</span> <span class="n">side</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Determines whether the pairing of the piece id and the side are in the WRONG PUZZLE ID list.</span>

<span class="sd">        Args:</span>
<span class="sd">            piece_id (int): Identification number of the wrong puzzle piece</span>
<span class="sd">            side (PuzzlePieceSide): Side of the puzzle piece which is being checked for a WRONG PUZZLE ID</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">BestBuddyAccuracy</span><span class="o">.</span><span class="n">check_if_piece_side_tuple_in_dict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_wrong_puzzle_id</span><span class="p">,</span> <span class="n">piece_id</span><span class="p">,</span> <span class="n">side</span><span class="p">)</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">wrong_puzzle_id</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the number of pieces assigned to the wrong puzzle</span>

<span class="sd">        Returns (int): Number pieces in the wrong puzzle</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_wrong_puzzle_id</span><span class="p">)</span>

<div class="viewcode-block" id="ModifiedNeighborAccuracy.add_correct_neighbor"><a class="viewcode-back" href="../../hammoudeh_puzzle_solver.html#hammoudeh_puzzle_solver.puzzle_importer.ModifiedNeighborAccuracy.add_correct_neighbor">[docs]</a>    <span class="k">def</span> <span class="nf">add_correct_neighbor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">piece_id</span><span class="p">,</span> <span class="n">side</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Stores information on a CORRECT neighbor</span>

<span class="sd">        Args:</span>
<span class="sd">            piece_id (int): Identification number of the CORRECT puzzle piece</span>
<span class="sd">            side (PuzzlePieceSide): Side of the puzzle piece with the CORRECT neighbor</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">BestBuddyAccuracy</span><span class="o">.</span><span class="n">add_piece_side_tuple_to_dict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_correct_neighbors</span><span class="p">,</span> <span class="n">piece_id</span><span class="p">,</span> <span class="n">side</span><span class="p">)</span></div>

<div class="viewcode-block" id="ModifiedNeighborAccuracy.exists_correct_neighbor"><a class="viewcode-back" href="../../hammoudeh_puzzle_solver.html#hammoudeh_puzzle_solver.puzzle_importer.ModifiedNeighborAccuracy.exists_correct_neighbor">[docs]</a>    <span class="k">def</span> <span class="nf">exists_correct_neighbor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">piece_id</span><span class="p">,</span> <span class="n">side</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Determines whether the pairing of the piece id and the side are in the CORRECT neighbors list.</span>

<span class="sd">        Args:</span>
<span class="sd">            piece_id (int): Identification number of the wrong puzzle piece</span>
<span class="sd">            side (PuzzlePieceSide): Side of the puzzle piece which is being checked for a CORRECT neighbor</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">BestBuddyAccuracy</span><span class="o">.</span><span class="n">check_if_piece_side_tuple_in_dict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_correct_neighbors</span><span class="p">,</span> <span class="n">piece_id</span><span class="p">,</span> <span class="n">side</span><span class="p">)</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">correct_neighbor_count</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the CORRECT neighbor count for this puzzle.</span>

<span class="sd">        Returns (int): Number of CORRECT neighbors in the puzzle</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_correct_neighbors</span><span class="p">)</span>

<div class="viewcode-block" id="ModifiedNeighborAccuracy.add_wrong_neighbor"><a class="viewcode-back" href="../../hammoudeh_puzzle_solver.html#hammoudeh_puzzle_solver.puzzle_importer.ModifiedNeighborAccuracy.add_wrong_neighbor">[docs]</a>    <span class="k">def</span> <span class="nf">add_wrong_neighbor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">piece_id</span><span class="p">,</span> <span class="n">side</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Stores information on a wrong neighbor</span>

<span class="sd">        Args:</span>
<span class="sd">            piece_id (int): Identification number of the wrong puzzle piece</span>
<span class="sd">            side (PuzzlePieceSide): Side of the puzzle piece with the wrong neighbor</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">BestBuddyAccuracy</span><span class="o">.</span><span class="n">add_piece_side_tuple_to_dict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_wrong_neighbors</span><span class="p">,</span> <span class="n">piece_id</span><span class="p">,</span> <span class="n">side</span><span class="p">)</span></div>

<div class="viewcode-block" id="ModifiedNeighborAccuracy.exists_wrong_neighbor"><a class="viewcode-back" href="../../hammoudeh_puzzle_solver.html#hammoudeh_puzzle_solver.puzzle_importer.ModifiedNeighborAccuracy.exists_wrong_neighbor">[docs]</a>    <span class="k">def</span> <span class="nf">exists_wrong_neighbor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">piece_id</span><span class="p">,</span> <span class="n">side</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Determines whether the pairing of the piece id and the side are in the WRONG neighbors list.</span>

<span class="sd">        Args:</span>
<span class="sd">            piece_id (int): Identification number of the wrong puzzle piece</span>
<span class="sd">            side (PuzzlePieceSide): Side of the puzzle piece which is being checked for a WRONG neighbor</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">BestBuddyAccuracy</span><span class="o">.</span><span class="n">check_if_piece_side_tuple_in_dict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_wrong_neighbors</span><span class="p">,</span> <span class="n">piece_id</span><span class="p">,</span> <span class="n">side</span><span class="p">)</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">wrong_neighbor_count</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the wrong neighbor count for this puzzle.</span>

<span class="sd">        Returns (int): Number of wrong neighbors in the puzzle</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_wrong_neighbors</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">original_puzzle_id</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Original/Input Puzzle ID Number Property</span>

<span class="sd">        This method is used to access puzzle identification number information of the original/input puzzle.</span>

<span class="sd">        Returns (int): Original puzzle identification number associated with this set of modified neighbor</span>
<span class="sd">        accuracy information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_original_puzzle_id</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">solved_puzzle_id</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Solved Puzzle ID Number Property</span>

<span class="sd">        This method is used to access puzzle identification number information of the puzzle that was output</span>
<span class="sd">        by the solved.</span>

<span class="sd">        Returns (int): Solved puzzle identification number associated with this set of modified neighbor</span>
<span class="sd">        accuracy information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_solved_puzzle_id</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">total_numb_pieces_in_solved_puzzle</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Number of Included Pieces</span>

<span class="sd">        This function returns the number of puzzle pieces in the solved image.</span>

<span class="sd">        Returns (int): Number of pieces in the solved</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">numb_pieces_from_original_puzzle_in_solved_puzzle</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">wrong_puzzle_id</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">numb_pieces_in_original_puzzle</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Property to extract the number of pieces in the original (input) puzzle.</span>

<span class="sd">        Returns (int): Piece count in the original, input puzzle</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_actual_number_of_pieces</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">numb_pieces_from_original_puzzle_in_solved_puzzle</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Number of pieces from the original puzzle in the solved result</span>

<span class="sd">        Returns (int): Only the number of included pieces</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">correct_neighbor_count</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">wrong_neighbor_count</span><span class="p">)</span> <span class="o">/</span> <span class="n">PuzzlePieceSide</span><span class="o">.</span><span class="n">get_numb_sides</span><span class="p">()</span>

    <span class="nd">@staticmethod</span>
<div class="viewcode-block" id="ModifiedNeighborAccuracy.check_if_update_neighbor_accuracy"><a class="viewcode-back" href="../../hammoudeh_puzzle_solver.html#hammoudeh_puzzle_solver.puzzle_importer.ModifiedNeighborAccuracy.check_if_update_neighbor_accuracy">[docs]</a>    <span class="k">def</span> <span class="nf">check_if_update_neighbor_accuracy</span><span class="p">(</span><span class="n">current_best_neighbor_accuracy</span><span class="p">,</span> <span class="n">new_neighbor_accuracy</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Determines whether the current best direct accuracy should be replaced with a newly calculated direct</span>
<span class="sd">        accuracy.</span>

<span class="sd">        Args:</span>
<span class="sd">            current_best_neighbor_accuracy (ModifiedNeighborAccuracy): The best direct accuracy results</span>
<span class="sd">            found so far.</span>

<span class="sd">            new_neighbor_accuracy (ModifiedNeighborAccuracy): The newly calculated best direct accuracy</span>

<span class="sd">        Returns (bool):</span>
<span class="sd">            True if accuracy should be updated and False otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># If no best neighbor accuracy found so far, then just return True</span>
        <span class="k">if</span> <span class="n">current_best_neighbor_accuracy</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">True</span>

        <span class="c1"># Get the information on the current best result</span>
        <span class="n">best_numb_correct</span> <span class="o">=</span> <span class="n">current_best_neighbor_accuracy</span><span class="o">.</span><span class="n">correct_neighbor_count</span>
        <span class="n">best_accuracy</span> <span class="o">=</span> <span class="n">current_best_neighbor_accuracy</span><span class="o">.</span><span class="n">weighted_accuracy</span>

        <span class="c1"># Get the information on the new direct accuracy result</span>
        <span class="n">new_numb_correct</span> <span class="o">=</span> <span class="n">new_neighbor_accuracy</span><span class="o">.</span><span class="n">correct_neighbor_count</span>
        <span class="n">new_accuracy</span> <span class="o">=</span> <span class="n">new_neighbor_accuracy</span><span class="o">.</span><span class="n">weighted_accuracy</span>

        <span class="c1"># Update the standard direct accuracy if applicable</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">best_accuracy</span> <span class="o">&lt;</span> <span class="n">new_accuracy</span> <span class="ow">or</span>
                <span class="p">(</span><span class="n">best_accuracy</span> <span class="o">==</span> <span class="n">new_accuracy</span> <span class="ow">and</span> <span class="n">best_numb_correct</span> <span class="o">&lt;</span> <span class="n">new_numb_correct</span><span class="p">)):</span>
            <span class="k">return</span> <span class="bp">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">weighted_accuracy</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates and returns the weighted neighbor accuracy</span>

<span class="sd">        Returns (float): Weighted neighbor accuracy.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">accuracy</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">correct_neighbor_count</span> <span class="o">/</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_actual_number_of_pieces</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">wrong_puzzle_id</span><span class="p">)</span>
        <span class="n">accuracy</span> <span class="o">/=</span> <span class="n">PuzzlePieceSide</span><span class="o">.</span><span class="n">get_numb_sides</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">accuracy</span></div>


<div class="viewcode-block" id="Puzzle"><a class="viewcode-back" href="../../hammoudeh_puzzle_solver.html#hammoudeh_puzzle_solver.puzzle_importer.Puzzle">[docs]</a><span class="k">class</span> <span class="nc">Puzzle</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Puzzle Object represents a single Jigsaw Puzzle.  It can import a puzzle from an image file and</span>
<span class="sd">    create the puzzle pieces.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">print_debug_messages</span> <span class="o">=</span> <span class="bp">True</span>

    <span class="c1"># Used to store the Puzzle result images.</span>
    <span class="n">OUTPUT_IMAGE_DIRECTORY</span> <span class="o">=</span> <span class="s2">&quot;.</span><span class="se">\\</span><span class="s2">solved</span><span class="se">\\</span><span class="s2">&quot;</span>

    <span class="c1"># DEFAULT_PIECE_WIDTH = 28  # Width of a puzzle in pixels</span>
    <span class="n">DEFAULT_PIECE_WIDTH</span> <span class="o">=</span> <span class="mi">25</span>  <span class="c1"># Width of a puzzle in pixels</span>

    <span class="c1"># Optionally perform assertion checks.</span>
    <span class="n">_PERFORM_ASSERT_CHECKS</span> <span class="o">=</span> <span class="bp">True</span>

    <span class="c1"># Define the number of dimensions in the BGR space (i.e. blue, green, red)</span>
    <span class="n">NUMBER_BGR_DIMENSIONS</span> <span class="o">=</span> <span class="mi">3</span>

    <span class="c1"># Define the border when generating the accuracy images.</span>
    <span class="n">export_with_border</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="n">border_width</span> <span class="o">=</span> <span class="mi">3</span>
    <span class="n">border_outer_stripe_width</span> <span class="o">=</span> <span class="mi">1</span>

    <span class="c1"># Value stored when building the puzzle info when no piece is present in a given location</span>
    <span class="n">MISSING_PIECE_PUZZLE_INFO_VALUE</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">id_number</span><span class="p">,</span> <span class="n">image_filename</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">piece_width</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">starting_piece_id</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Puzzle Constructor</span>

<span class="sd">        Constructor that will optionally load an image into the puzzle as well.</span>

<span class="sd">        Args:</span>
<span class="sd">            id_number (int): ID number for the image.  It is used for multiple image puzzles.</span>
<span class="sd">            image_filename (Optional str): File path of the image to load</span>
<span class="sd">            piece_width (Optional int): Width of a puzzle piece in pixels</span>
<span class="sd">            starting_piece_id (int): Identification number for the first piece in the puzzle.  If not specified,</span>
<span class="sd">            it default to 0.</span>
<span class="sd">        Returns (Puzzle):</span>
<span class="sd">            Puzzle divided into pieces based off the source image and the specified parameters.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Internal Pillow Image object.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_id</span> <span class="o">=</span> <span class="n">id_number</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_img</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_img_LAB</span> <span class="o">=</span> <span class="bp">None</span>

        <span class="c1"># Initialize the puzzle information.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_grid_size</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_piece_width</span> <span class="o">=</span> <span class="n">piece_width</span> <span class="k">if</span> <span class="n">piece_width</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="k">else</span> <span class="n">Puzzle</span><span class="o">.</span><span class="n">DEFAULT_PIECE_WIDTH</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_img_width</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_img_height</span> <span class="o">=</span> <span class="bp">None</span>

        <span class="c1"># Define the upper left coordinate</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_upper_left</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

        <span class="c1"># No pieces for the puzzle yet.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pieces</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">if</span> <span class="n">image_filename</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_filename</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
            <span class="k">return</span>

        <span class="c1"># Stores the image file and then loads it.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_filename</span> <span class="o">=</span> <span class="n">image_filename</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_load_puzzle_image</span><span class="p">()</span>

        <span class="c1"># Make image pieces.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">make_pieces</span><span class="p">(</span><span class="n">starting_piece_id</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_load_puzzle_image</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Puzzle Image Loader</span>

<span class="sd">        Loads the puzzle image file a specified filename.  Loads the specified puzzle image into memory.</span>
<span class="sd">        It also stores information on the puzzle dimensions (e.g. width, height) into the puzzle object.</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># If the filename does not exist, then raise an error.</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_filename</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid </span><span class="se">\&quot;</span><span class="si">%s</span><span class="se">\&quot;</span><span class="s2"> value.  File does not exist&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">_filename</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_img</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_filename</span><span class="p">)</span>  <span class="c1"># Note this imports in BGR format not RGB.</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_img</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s2">&quot;Unable to load the image at the specified location </span><span class="se">\&quot;</span><span class="si">%s</span><span class="se">\&quot;</span><span class="s2">.&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">_filename</span><span class="p">)</span>

        <span class="c1"># Get the image dimensions.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_img_height</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_img_width</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_img</span><span class="o">.</span><span class="n">shape</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span>

        <span class="c1"># Make a LAB version of the image.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_img_LAB</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">cvtColor</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_img</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">COLOR_BGR2LAB</span><span class="p">)</span>

<div class="viewcode-block" id="Puzzle.make_pieces"><a class="viewcode-back" href="../../hammoudeh_puzzle_solver.html#hammoudeh_puzzle_solver.puzzle_importer.Puzzle.make_pieces">[docs]</a>    <span class="k">def</span> <span class="nf">make_pieces</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">starting_id_numb</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Puzzle Generator</span>

<span class="sd">        Given a puzzle, this function turns the puzzle into a set of pieces.</span>

<span class="sd">        **Note:** When creating the pieces, some of the source image may need to be discarded</span>
<span class="sd">        if the image size is not evenly divisible by the number of pieces specified</span>
<span class="sd">        as parameters to this function.</span>

<span class="sd">        Args:</span>
<span class="sd">            starting_id_numb (Optional int): Identification number of the first piece in the puzzle.  If it is not</span>
<span class="sd">            specified it defaults to 0.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Calculate the piece information.</span>
        <span class="n">numb_cols</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_img_width</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">piece_width</span><span class="p">))</span>  <span class="c1"># Floor in python returns a float</span>
        <span class="n">numb_rows</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_img_height</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">piece_width</span><span class="p">))</span>  <span class="c1"># Floor in python returns a float</span>
        <span class="k">if</span> <span class="n">numb_cols</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">numb_rows</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Image size is too small for the image.  Check your setup&quot;</span><span class="p">)</span>

        <span class="c1"># Store the grid size.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_grid_size</span> <span class="o">=</span> <span class="p">(</span><span class="n">numb_rows</span><span class="p">,</span> <span class="n">numb_cols</span><span class="p">)</span>

        <span class="c1"># Store the original width and height and recalculate the new width and height.</span>
        <span class="n">original_width</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_img_width</span>
        <span class="n">original_height</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_img_height</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_img_width</span> <span class="o">=</span> <span class="n">numb_cols</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">piece_width</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_img_height</span> <span class="o">=</span> <span class="n">numb_rows</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">piece_width</span>

        <span class="c1"># Shave off the edge of the image LAB and BGR images</span>
        <span class="n">puzzle_upper_left</span> <span class="o">=</span> <span class="p">((</span><span class="n">original_height</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">_img_height</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="p">(</span><span class="n">original_width</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">_img_width</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_img</span> <span class="o">=</span> <span class="n">Puzzle</span><span class="o">.</span><span class="n">extract_subimage</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_img</span><span class="p">,</span> <span class="n">puzzle_upper_left</span><span class="p">,</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_img_height</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_img_width</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_img_LAB</span> <span class="o">=</span> <span class="n">Puzzle</span><span class="o">.</span><span class="n">extract_subimage</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_img_LAB</span><span class="p">,</span> <span class="n">puzzle_upper_left</span><span class="p">,</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_img_height</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_img_width</span><span class="p">))</span>

        <span class="c1"># Break the board into pieces.</span>
        <span class="n">piece_id</span> <span class="o">=</span> <span class="n">starting_id_numb</span>
        <span class="n">piece_size</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">piece_width</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">piece_width</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pieces</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># Create an empty array to hold the puzzle pieces.</span>
        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">numb_rows</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">numb_cols</span><span class="p">):</span>
                <span class="n">piece_upper_left</span> <span class="o">=</span> <span class="p">(</span><span class="n">row</span> <span class="o">*</span> <span class="n">piece_size</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">col</span> <span class="o">*</span> <span class="n">piece_size</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>  <span class="c1"># No longer consider upper left since board shrunk above</span>
                <span class="n">piece_img</span> <span class="o">=</span> <span class="n">Puzzle</span><span class="o">.</span><span class="n">extract_subimage</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_img_LAB</span><span class="p">,</span> <span class="n">piece_upper_left</span><span class="p">,</span> <span class="n">piece_size</span><span class="p">)</span>

                <span class="c1"># Create the puzzle piece and assign to the location.</span>
                <span class="n">location</span> <span class="o">=</span> <span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_pieces</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">PuzzlePiece</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_id</span><span class="p">,</span> <span class="n">location</span><span class="p">,</span> <span class="n">piece_img</span><span class="p">,</span>
                                                <span class="n">piece_id</span><span class="o">=</span><span class="n">piece_id</span><span class="p">,</span> <span class="n">puzzle_grid_size</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_grid_size</span><span class="p">))</span>
                <span class="c1"># Increment the piece identification number</span>
                <span class="n">piece_id</span> <span class="o">+=</span> <span class="mi">1</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">numb_pieces</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the number of pieces.  Note missing pieces are not counted in this statistic.</span>

<span class="sd">        Returns (int): Number of pieces in the puzzle</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_pieces</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">id_number</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Puzzle Identification Number</span>

<span class="sd">        Gets the identification number for a puzzle.</span>

<span class="sd">        Returns (int): Identification number for the puzzle</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_id</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">pieces</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets all of the pieces in this puzzle.</span>

<span class="sd">        Returns ([PuzzlePiece]):</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pieces</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">piece_width</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the size of a puzzle piece.</span>

<span class="sd">        Returns (int): Height/width of each piece in pixels.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_piece_width</span>

    <span class="nd">@staticmethod</span>
<div class="viewcode-block" id="Puzzle.reconstruct_from_pieces"><a class="viewcode-back" href="../../hammoudeh_puzzle_solver.html#hammoudeh_puzzle_solver.puzzle_importer.Puzzle.reconstruct_from_pieces">[docs]</a>    <span class="k">def</span> <span class="nf">reconstruct_from_pieces</span><span class="p">(</span><span class="n">pieces</span><span class="p">,</span> <span class="n">id_numb</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">display_image</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Constructs a puzzle from a set of pieces.</span>

<span class="sd">        Args:</span>
<span class="sd">            pieces ([PuzzlePiece]): Set of puzzle pieces that comprise the puzzle.</span>
<span class="sd">            id_numb (Optional int): Identification number for the puzzle</span>
<span class="sd">            display_image (Optional bool): Select whether to display the image at the end of reconstruction</span>

<span class="sd">        Returns (Puzzle): Puzzle constructed from the pieces.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">pieces</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Error: Each puzzle must have at least one piece.&quot;</span><span class="p">)</span>

        <span class="c1"># Create the puzzle to return.  Give it an ID number.</span>
        <span class="n">output_puzzle</span> <span class="o">=</span> <span class="n">Puzzle</span><span class="p">(</span><span class="n">id_numb</span><span class="p">)</span>
        <span class="n">output_puzzle</span><span class="o">.</span><span class="n">_id</span> <span class="o">=</span> <span class="n">id_numb</span>

        <span class="c1"># Create a copy of the pieces.</span>
        <span class="n">output_puzzle</span><span class="o">.</span><span class="n">_pieces</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">pieces</span><span class="p">)</span>

        <span class="c1"># Get the first piece and use its information</span>
        <span class="n">first_piece</span> <span class="o">=</span> <span class="n">output_puzzle</span><span class="o">.</span><span class="n">_pieces</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">output_puzzle</span><span class="o">.</span><span class="n">_piece_width</span> <span class="o">=</span> <span class="n">first_piece</span><span class="o">.</span><span class="n">width</span>

        <span class="c1"># Find the min and max row and column.</span>
        <span class="p">(</span><span class="n">min_row</span><span class="p">,</span> <span class="n">max_row</span><span class="p">,</span> <span class="n">min_col</span><span class="p">,</span> <span class="n">max_col</span><span class="p">)</span> <span class="o">=</span> <span class="n">output_puzzle</span><span class="o">.</span><span class="n">get_min_and_max_row_and_columns</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>

        <span class="c1"># Normalize each piece&#39;s locations based off all the pieces in the board.</span>
        <span class="k">for</span> <span class="n">piece</span> <span class="ow">in</span> <span class="n">output_puzzle</span><span class="o">.</span><span class="n">_pieces</span><span class="p">:</span>
            <span class="n">loc</span> <span class="o">=</span> <span class="n">piece</span><span class="o">.</span><span class="n">location</span>
            <span class="n">piece</span><span class="o">.</span><span class="n">location</span> <span class="o">=</span> <span class="p">(</span><span class="n">loc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">min_row</span><span class="p">,</span> <span class="n">loc</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">min_col</span><span class="p">)</span>
        <span class="n">output_puzzle</span><span class="o">.</span><span class="n">reset_upper_left_location</span><span class="p">()</span>

        <span class="c1"># Construct the puzzle image.</span>
        <span class="n">output_puzzle</span><span class="o">.</span><span class="n">build_puzzle_image</span><span class="p">()</span>

        <span class="c1"># Convert the image to LAB format.</span>
        <span class="n">output_puzzle</span><span class="o">.</span><span class="n">_img_LAB</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">cvtColor</span><span class="p">(</span><span class="n">output_puzzle</span><span class="o">.</span><span class="n">_img</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">COLOR_BGR2LAB</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">display_image</span><span class="p">:</span>
            <span class="n">Puzzle</span><span class="o">.</span><span class="n">display_image</span><span class="p">(</span><span class="n">output_puzzle</span><span class="o">.</span><span class="n">_img</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">output_puzzle</span></div>

<div class="viewcode-block" id="Puzzle.build_puzzle_image"><a class="viewcode-back" href="../../hammoudeh_puzzle_solver.html#hammoudeh_puzzle_solver.puzzle_importer.Puzzle.build_puzzle_image">[docs]</a>    <span class="k">def</span> <span class="nf">build_puzzle_image</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">use_results_coloring</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Makes a puzzle image.</span>

<span class="sd">        Args:</span>
<span class="sd">            use_results_coloring (Optional bool): If set to true, each piece&#39;s image is not based off the original</span>
<span class="sd">              image but what was stored based off the results.</span>

<span class="sd">        Returns (Puzzle): Puzzle constructed from the pieces.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># noinspection PyTypeChecker</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_img</span> <span class="o">=</span> <span class="n">PuzzlePiece</span><span class="o">.</span><span class="n">create_solid_image</span><span class="p">(</span><span class="n">SolidColor</span><span class="o">.</span><span class="n">black</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_img_width</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_img_height</span><span class="p">)</span>

        <span class="c1"># Insert the pieces into the puzzle</span>
        <span class="k">for</span> <span class="n">piece</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pieces</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">insert_piece_into_image</span><span class="p">(</span><span class="n">piece</span><span class="p">,</span> <span class="n">use_results_coloring</span><span class="p">)</span></div>

<div class="viewcode-block" id="Puzzle.reset_upper_left_location"><a class="viewcode-back" href="../../hammoudeh_puzzle_solver.html#hammoudeh_puzzle_solver.puzzle_importer.Puzzle.reset_upper_left_location">[docs]</a>    <span class="k">def</span> <span class="nf">reset_upper_left_location</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Reset Upper Left Location</span>

<span class="sd">        &quot;Upper Left&quot; refers to the coordinate of the upper-leftmost piece.  By running this function, you</span>
<span class="sd">        update this reference point to (0, 0)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_upper_left</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span></div>

<div class="viewcode-block" id="Puzzle.determine_standard_direct_accuracy"><a class="viewcode-back" href="../../hammoudeh_puzzle_solver.html#hammoudeh_puzzle_solver.puzzle_importer.Puzzle.determine_standard_direct_accuracy">[docs]</a>    <span class="k">def</span> <span class="nf">determine_standard_direct_accuracy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expected_puzzle_id</span><span class="p">,</span> <span class="n">numb_pieces_in_original_puzzle</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Standard Direct Accuracy Finder</span>

<span class="sd">        Determines the accuracy of the placement using the standard direct accuracy method.</span>

<span class="sd">        Args:</span>
<span class="sd">            expected_puzzle_id (int): Expected puzzle identification number</span>
<span class="sd">            numb_pieces_in_original_puzzle (int): Number of pieces in the original puzzle</span>

<span class="sd">        Returns (DirectAccuracyPuzzleResults): Information regarding the direct accuracy of the placement</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">determine_modified_direct_accuracy</span><span class="p">(</span><span class="n">expected_puzzle_id</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">numb_pieces_in_original_puzzle</span><span class="p">)</span></div>

<div class="viewcode-block" id="Puzzle.determine_modified_direct_accuracy"><a class="viewcode-back" href="../../hammoudeh_puzzle_solver.html#hammoudeh_puzzle_solver.puzzle_importer.Puzzle.determine_modified_direct_accuracy">[docs]</a>    <span class="k">def</span> <span class="nf">determine_modified_direct_accuracy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expected_puzzle_id</span><span class="p">,</span> <span class="n">upper_left</span><span class="p">,</span> <span class="n">numb_pieces_in_original_puzzle</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Modified Direct Accuracy Finder</span>

<span class="sd">        Determines the accuracy of the placement using the modified direct accuracy method where by the piece accuracy</span>
<span class="sd">        is determined by something other than the exact upper-most left piece (i.e. location (0, 0)).</span>

<span class="sd">        Args:</span>
<span class="sd">            expected_puzzle_id (int): Expected puzzle identification number</span>
<span class="sd">            upper_left(Tuple[int]): In the direct method, the upper-left most location is the origin.  In the</span>
<span class="sd">            &quot;Modified Direct Method&quot;, this can be a tuple in the format (row, column).</span>
<span class="sd">            numb_pieces_in_original_puzzle (int): Number of pieces in the original puzzle</span>

<span class="sd">        Returns (DirectAccuracyPuzzleResults): Information regarding the modified direct accuracy of the placement</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Optionally perform the assertion checks</span>
        <span class="k">if</span> <span class="n">Puzzle</span><span class="o">.</span><span class="n">_PERFORM_ASSERT_CHECKS</span><span class="p">:</span>
            <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">_upper_left</span> <span class="o">==</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>  <span class="c1"># Upper left should be normalized to zero.</span>

        <span class="c1"># Determine the accuracy assuming the upper left is in the normal location (i.e. (0,0))</span>
        <span class="n">accuracy_info</span> <span class="o">=</span> <span class="n">DirectAccuracyPuzzleResults</span><span class="p">(</span><span class="n">expected_puzzle_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">id_number</span><span class="p">,</span> <span class="n">numb_pieces_in_original_puzzle</span><span class="p">)</span>

        <span class="c1"># Iterate through each piece and determine its accuracy results.</span>
        <span class="k">for</span> <span class="n">piece</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pieces</span><span class="p">:</span>

            <span class="c1"># Ensure that the puzzle ID matches the requirement</span>
            <span class="k">if</span> <span class="n">piece</span><span class="o">.</span><span class="n">actual_puzzle_id</span> <span class="o">!=</span> <span class="n">expected_puzzle_id</span><span class="p">:</span>
                <span class="n">accuracy_info</span><span class="o">.</span><span class="n">add_different_puzzle</span><span class="p">(</span><span class="n">piece</span><span class="p">)</span>

            <span class="c1"># Ensure that the puzzle piece is in the correct location</span>
            <span class="k">elif</span> <span class="ow">not</span> <span class="n">piece</span><span class="o">.</span><span class="n">is_correctly_placed</span><span class="p">(</span><span class="n">upper_left</span><span class="p">):</span>
                <span class="n">accuracy_info</span><span class="o">.</span><span class="n">add_wrong_location</span><span class="p">(</span><span class="n">piece</span><span class="p">)</span>

            <span class="c1"># Ensure that the rotation is set to 0</span>
            <span class="k">elif</span> <span class="n">piece</span><span class="o">.</span><span class="n">rotation</span> <span class="o">!=</span> <span class="n">PuzzlePieceRotation</span><span class="o">.</span><span class="n">degree_0</span><span class="p">:</span>
                <span class="n">accuracy_info</span><span class="o">.</span><span class="n">add_wrong_rotation</span><span class="p">(</span><span class="n">piece</span><span class="p">)</span>

            <span class="c1"># Piece is correctly placed</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">accuracy_info</span><span class="o">.</span><span class="n">add_correct_placement</span><span class="p">(</span><span class="n">piece</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">accuracy_info</span></div>

<div class="viewcode-block" id="Puzzle.randomize_puzzle_piece_locations"><a class="viewcode-back" href="../../hammoudeh_puzzle_solver.html#hammoudeh_puzzle_solver.puzzle_importer.Puzzle.randomize_puzzle_piece_locations">[docs]</a>    <span class="k">def</span> <span class="nf">randomize_puzzle_piece_locations</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Puzzle Piece Location Randomizer</span>

<span class="sd">        Randomly assigns puzzle pieces to different locations.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># Get all locations in the image.</span>
        <span class="n">all_locations</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">piece</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pieces</span><span class="p">:</span>
            <span class="n">all_locations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">piece</span><span class="o">.</span><span class="n">location</span><span class="p">)</span>

        <span class="c1"># Shuffle the image locations</span>
        <span class="n">random</span><span class="o">.</span><span class="n">shuffle</span><span class="p">(</span><span class="n">all_locations</span><span class="p">)</span>

        <span class="c1"># Reassign the pieces to random locations</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_pieces</span><span class="p">)):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_pieces</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">location</span> <span class="o">=</span> <span class="n">all_locations</span><span class="p">[</span><span class="n">i</span><span class="p">]</span></div>

<div class="viewcode-block" id="Puzzle.randomize_puzzle_piece_rotations"><a class="viewcode-back" href="../../hammoudeh_puzzle_solver.html#hammoudeh_puzzle_solver.puzzle_importer.Puzzle.randomize_puzzle_piece_rotations">[docs]</a>    <span class="k">def</span> <span class="nf">randomize_puzzle_piece_rotations</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Puzzle Piece Rotation Randomizer</span>

<span class="sd">        Assigns a random rotation to each piece in the puzzle.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">piece</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pieces</span><span class="p">:</span>
            <span class="n">piece</span><span class="o">.</span><span class="n">rotation</span> <span class="o">=</span> <span class="n">PuzzlePieceRotation</span><span class="o">.</span><span class="n">random_rotation</span><span class="p">()</span></div>

<div class="viewcode-block" id="Puzzle.set_piece_color_for_direct_accuracy"><a class="viewcode-back" href="../../hammoudeh_puzzle_solver.html#hammoudeh_puzzle_solver.puzzle_importer.Puzzle.set_piece_color_for_direct_accuracy">[docs]</a>    <span class="k">def</span> <span class="nf">set_piece_color_for_direct_accuracy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">direct_acc_results</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Colorizes a piece based off the direct accuracy results.</span>

<span class="sd">        Args:</span>
<span class="sd">            direct_acc_results (DirectAccuracyPuzzleResults): Direct accuracy (either standard or modified) for</span>
<span class="sd">            the solved image.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Iterate through each puzzle piece and set its piece color</span>
        <span class="k">for</span> <span class="n">piece</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pieces</span><span class="p">:</span>
            <span class="n">piece</span><span class="o">.</span><span class="n">results_image_coloring</span> <span class="o">=</span> <span class="n">direct_acc_results</span><span class="o">.</span><span class="n">get_piece_result</span><span class="p">(</span><span class="n">piece</span><span class="o">.</span><span class="n">id_number</span><span class="p">)</span></div>

<div class="viewcode-block" id="Puzzle.get_min_and_max_row_and_columns"><a class="viewcode-back" href="../../hammoudeh_puzzle_solver.html#hammoudeh_puzzle_solver.puzzle_importer.Puzzle.get_min_and_max_row_and_columns">[docs]</a>    <span class="k">def</span> <span class="nf">get_min_and_max_row_and_columns</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">update_board_dimension_information</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Min/Max Row and Column Finder</span>

<span class="sd">        For a given set of pieces, this function returns the minimum and maximum of the columns and rows</span>
<span class="sd">        across all of the pieces.</span>

<span class="sd">        Args:</span>
<span class="sd">            update_board_dimension_information (bool): Selectively update the board dimension information (e.g.</span>
<span class="sd">            upper left location, grid_size, puzzle width, puzzle height, etc.).</span>

<span class="sd">        Returns ([int]):</span>
<span class="sd">        Tuple in the form: (min_row, max_row, min_column, max_column)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">first_piece</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pieces</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">min_row</span> <span class="o">=</span> <span class="n">max_row</span> <span class="o">=</span> <span class="n">first_piece</span><span class="o">.</span><span class="n">location</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">min_col</span> <span class="o">=</span> <span class="n">max_col</span> <span class="o">=</span> <span class="n">first_piece</span><span class="o">.</span><span class="n">location</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_pieces</span><span class="p">)):</span>
            <span class="c1"># Verify all pieces are the same size</span>
            <span class="k">if</span> <span class="n">Puzzle</span><span class="o">.</span><span class="n">print_debug_messages</span><span class="p">:</span>
                <span class="k">assert</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">piece_width</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pieces</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">width</span><span class="p">)</span>
            <span class="c1"># Get the location of the piece</span>
            <span class="n">temp_loc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pieces</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">location</span>
            <span class="c1"># Update the min and max row if needed</span>
            <span class="k">if</span> <span class="n">min_row</span> <span class="o">&gt;</span> <span class="n">temp_loc</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
                <span class="n">min_row</span> <span class="o">=</span> <span class="n">temp_loc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">elif</span> <span class="n">max_row</span> <span class="o">&lt;</span> <span class="n">temp_loc</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
                <span class="n">max_row</span> <span class="o">=</span> <span class="n">temp_loc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="c1"># Update the min and max column if needed</span>
            <span class="k">if</span> <span class="n">min_col</span> <span class="o">&gt;</span> <span class="n">temp_loc</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
                <span class="n">min_col</span> <span class="o">=</span> <span class="n">temp_loc</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">elif</span> <span class="n">max_col</span> <span class="o">&lt;</span> <span class="n">temp_loc</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
                <span class="n">max_col</span> <span class="o">=</span> <span class="n">temp_loc</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

        <span class="c1"># If the user specified it, update the board dimension information</span>
        <span class="k">if</span> <span class="n">update_board_dimension_information</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_upper_left</span> <span class="o">=</span> <span class="p">(</span><span class="n">min_row</span><span class="p">,</span> <span class="n">min_col</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_grid_size</span> <span class="o">=</span> <span class="p">(</span><span class="n">max_row</span> <span class="o">-</span> <span class="n">min_row</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">max_col</span> <span class="o">-</span> <span class="n">min_col</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
            <span class="c1"># Calculate the size of the image</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_img_width</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_grid_size</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">piece_width</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_img_height</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_grid_size</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">piece_width</span>

        <span class="c1"># Return the minimum and maximum row/column information</span>
        <span class="k">return</span> <span class="n">min_row</span><span class="p">,</span> <span class="n">max_row</span><span class="p">,</span> <span class="n">min_col</span><span class="p">,</span> <span class="n">max_col</span></div>

<div class="viewcode-block" id="Puzzle.assign_all_pieces_to_original_location"><a class="viewcode-back" href="../../hammoudeh_puzzle_solver.html#hammoudeh_puzzle_solver.puzzle_importer.Puzzle.assign_all_pieces_to_original_location">[docs]</a>    <span class="k">def</span> <span class="nf">assign_all_pieces_to_original_location</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Piece Correct Assignment</span>

<span class="sd">        Assigns each piece to its original location for debug purposes.</span>

<span class="sd">        ::Note:: This should NOT be used in a solver; that would be cheating.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">piece</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pieces</span><span class="p">:</span>
            <span class="c1"># noinspection PyProtectedMember</span>
            <span class="n">piece</span><span class="o">.</span><span class="n">_assign_to_original_location</span><span class="p">()</span></div>

<div class="viewcode-block" id="Puzzle.assign_all_pieces_to_same_rotation"><a class="viewcode-back" href="../../hammoudeh_puzzle_solver.html#hammoudeh_puzzle_solver.puzzle_importer.Puzzle.assign_all_pieces_to_same_rotation">[docs]</a>    <span class="k">def</span> <span class="nf">assign_all_pieces_to_same_rotation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rotation</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Pieces Rotation Assigner</span>

<span class="sd">        Assigns each piece to a specified, single rotation</span>

<span class="sd">        ::Note:: This should NOT be used in a solver; that would be cheating.</span>

<span class="sd">        Args:</span>
<span class="sd">            rotation (PuzzlePieceRotation): Rotation to assign to all pieces.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">piece</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pieces</span><span class="p">:</span>
            <span class="c1"># noinspection PyProtectedMember</span>
            <span class="n">piece</span><span class="o">.</span><span class="n">rotation</span> <span class="o">=</span> <span class="n">rotation</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">grid_size</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Puzzle Grid Size Property</span>

<span class="sd">        Used to get the maximum dimensions of the puzzle in number of rows by number of columns.</span>

<span class="sd">        Returns ([int)): Grid size of the puzzle as a tuple in the form (number_rows, number_columns)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_grid_size</span>

    <span class="c1"># noinspection PyUnusedLocal</span>
    <span class="nd">@staticmethod</span>
<div class="viewcode-block" id="Puzzle.create_solid_bgr_image"><a class="viewcode-back" href="../../hammoudeh_puzzle_solver.html#hammoudeh_puzzle_solver.puzzle_importer.Puzzle.create_solid_bgr_image">[docs]</a>    <span class="k">def</span> <span class="nf">create_solid_bgr_image</span><span class="p">(</span><span class="n">size</span><span class="p">,</span> <span class="n">color</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Solid BGR Image Creator</span>

<span class="sd">        Creates a BGR Image (i.e. NumPy) array of the specified size.</span>

<span class="sd">        RIGHT NOW ONLY BLACK is supported.</span>

<span class="sd">        Args:</span>
<span class="sd">            size ([int]): Size of the image in height by width</span>
<span class="sd">            color (ImageColor): Solid color of the image.</span>

<span class="sd">        Returns:</span>
<span class="sd">        NumPy array representing a BGR image of the specified solid color</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">dimensions</span> <span class="o">=</span> <span class="p">(</span><span class="n">size</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">size</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">Puzzle</span><span class="o">.</span><span class="n">NUMBER_BGR_DIMENSIONS</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">numpy</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">dimensions</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">uint8</span><span class="p">)</span></div>

    <span class="nd">@staticmethod</span>
<div class="viewcode-block" id="Puzzle.extract_subimage"><a class="viewcode-back" href="../../hammoudeh_puzzle_solver.html#hammoudeh_puzzle_solver.puzzle_importer.Puzzle.extract_subimage">[docs]</a>    <span class="k">def</span> <span class="nf">extract_subimage</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">upper_left</span><span class="p">,</span> <span class="n">size</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Given an image (in the form of a Numpy array) extract a subimage.</span>

<span class="sd">        Args:</span>
<span class="sd">            img : Image in the form of a numpy array.</span>
<span class="sd">            upper_left ([int]): upper left location of the image to extract</span>
<span class="sd">            size ([int]): Size of the of the sub</span>

<span class="sd">        Returns:</span>
<span class="sd">        Sub image as a numpy array</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># Calculate the lower right of the image</span>
        <span class="n">img_end</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">):</span>
            <span class="n">img_end</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">upper_left</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">size</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>

        <span class="c1"># Return the sub image.</span>
        <span class="k">return</span> <span class="n">img</span><span class="p">[</span><span class="n">upper_left</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span><span class="n">img_end</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">upper_left</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span><span class="n">img_end</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="p">:]</span></div>

<div class="viewcode-block" id="Puzzle.insert_piece_into_image"><a class="viewcode-back" href="../../hammoudeh_puzzle_solver.html#hammoudeh_puzzle_solver.puzzle_importer.Puzzle.insert_piece_into_image">[docs]</a>    <span class="k">def</span> <span class="nf">insert_piece_into_image</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">piece</span><span class="p">,</span> <span class="n">use_results_coloring</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Takes a puzzle piece and converts its image into BGR then adds it to the master image.</span>

<span class="sd">        Args:</span>
<span class="sd">            piece (PuzzlePiece): Puzzle piece to be inserted into the puzzle&#39;s image.</span>
<span class="sd">            use_results_coloring (Optional bool): If set to true, each piece&#39;s image is not based off the original</span>
<span class="sd">              image but what was stored based off the results.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">piece_loc</span> <span class="o">=</span> <span class="n">piece</span><span class="o">.</span><span class="n">location</span>

        <span class="c1"># Define the upper left corner of the piece to insert</span>
        <span class="n">upper_left</span> <span class="o">=</span> <span class="p">(</span><span class="n">piece_loc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">piece</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="n">piece_loc</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">piece</span><span class="o">.</span><span class="n">width</span><span class="p">)</span>

        <span class="c1"># Determine whether to use the image or something based off the results</span>
        <span class="n">puzzle_img</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_img</span>

        <span class="c1"># Get the piece&#39;s image</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">use_results_coloring</span><span class="p">:</span>
            <span class="n">piece_img</span> <span class="o">=</span> <span class="n">piece</span><span class="o">.</span><span class="n">bgr_image</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">results_coloring</span> <span class="o">=</span> <span class="n">piece</span><span class="o">.</span><span class="n">results_image_coloring</span>
            <span class="c1"># Verify the piece has actual results information.</span>
            <span class="k">if</span> <span class="n">Puzzle</span><span class="o">.</span><span class="n">_PERFORM_ASSERT_CHECKS</span><span class="p">:</span>
                <span class="k">assert</span> <span class="n">results_coloring</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span>
            <span class="c1"># If the item is not a list, it is solid coloring</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">results_coloring</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                <span class="n">piece_img</span> <span class="o">=</span> <span class="n">PuzzlePiece</span><span class="o">.</span><span class="n">create_solid_image</span><span class="p">(</span><span class="n">results_coloring</span><span class="p">,</span> <span class="n">piece</span><span class="o">.</span><span class="n">width</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">piece_img</span> <span class="o">=</span> <span class="n">PuzzlePiece</span><span class="o">.</span><span class="n">create_side_polygon_image</span><span class="p">(</span><span class="n">results_coloring</span><span class="p">,</span> <span class="n">piece</span><span class="o">.</span><span class="n">width</span><span class="p">)</span>

        <span class="c1"># Select whether to display the image rotated</span>
        <span class="k">if</span> <span class="n">piece</span><span class="o">.</span><span class="n">rotation</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">or</span> <span class="n">piece</span><span class="o">.</span><span class="n">rotation</span> <span class="o">==</span> <span class="n">PuzzlePieceRotation</span><span class="o">.</span><span class="n">degree_0</span><span class="p">:</span>
            <span class="n">Puzzle</span><span class="o">.</span><span class="n">insert_subimage</span><span class="p">(</span><span class="n">puzzle_img</span><span class="p">,</span> <span class="n">upper_left</span><span class="p">,</span> <span class="n">piece_img</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">rotated_img</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">rot90</span><span class="p">(</span><span class="n">piece_img</span><span class="p">,</span> <span class="p">(</span><span class="n">PuzzlePieceRotation</span><span class="o">.</span><span class="n">degree_360</span><span class="o">.</span><span class="n">value</span> <span class="o">-</span> <span class="n">piece</span><span class="o">.</span><span class="n">rotation</span><span class="o">.</span><span class="n">value</span><span class="p">)</span> <span class="o">/</span> <span class="mi">90</span><span class="p">)</span>
            <span class="c1"># Puzzle.display_image(piece_img)</span>
            <span class="c1"># Puzzle.display_image(rotated_img)</span>
            <span class="n">Puzzle</span><span class="o">.</span><span class="n">insert_subimage</span><span class="p">(</span><span class="n">puzzle_img</span><span class="p">,</span> <span class="n">upper_left</span><span class="p">,</span> <span class="n">rotated_img</span><span class="p">)</span></div>

    <span class="nd">@staticmethod</span>
<div class="viewcode-block" id="Puzzle.get_file_extension"><a class="viewcode-back" href="../../hammoudeh_puzzle_solver.html#hammoudeh_puzzle_solver.puzzle_importer.Puzzle.get_file_extension">[docs]</a>    <span class="k">def</span> <span class="nf">get_file_extension</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the file extension of an object.</span>

<span class="sd">        Args:</span>
<span class="sd">            filename (str): Filename of an object</span>

<span class="sd">        Returns (str): File extension</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">os</span>
        <span class="n">ext</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">filename</span><span class="p">))</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">ext</span> <span class="k">if</span> <span class="n">ext</span> <span class="k">else</span> <span class="bp">None</span></div>

    <span class="nd">@staticmethod</span>
<div class="viewcode-block" id="Puzzle.get_filename_without_extension"><a class="viewcode-back" href="../../hammoudeh_puzzle_solver.html#hammoudeh_puzzle_solver.puzzle_importer.Puzzle.get_filename_without_extension">[docs]</a>    <span class="k">def</span> <span class="nf">get_filename_without_extension</span><span class="p">(</span><span class="n">filename_and_path</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the file extension of an object.</span>

<span class="sd">        Args:</span>
<span class="sd">            filename_and_path (str): Filename of an object</span>

<span class="sd">        Returns (str): File extension</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">filename_and_path</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span></div>

    <span class="nd">@staticmethod</span>
<div class="viewcode-block" id="Puzzle.make_image_filename"><a class="viewcode-back" href="../../hammoudeh_puzzle_solver.html#hammoudeh_puzzle_solver.puzzle_importer.Puzzle.make_image_filename">[docs]</a>    <span class="k">def</span> <span class="nf">make_image_filename</span><span class="p">(</span><span class="n">image_descriptor</span><span class="p">,</span> <span class="n">output_directory</span><span class="p">,</span> <span class="n">puzzle_type</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">,</span>
                            <span class="n">orig_img_filename</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">puzzle_id</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Builds an image file name using a set of standard parameters.</span>

<span class="sd">        Args:</span>
<span class="sd">            image_descriptor (str): Descriptor of the output puzzle.</span>
<span class="sd">            output_directory (str): Path where the file should be output</span>
<span class="sd">            puzzle_type (PuzzleType): Type of the puzzle</span>
<span class="sd">            timestamp (float): Timestamp to be associated with the file</span>
<span class="sd">            orig_img_filename (Optional str): Path to the original file name</span>
<span class="sd">            puzzle_id (Optional int): Identification number of the puzzle.</span>

<span class="sd">        Returns (str): Filename with extension and path.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># Store the reconstructed image</span>
        <span class="n">output_filename</span> <span class="o">=</span> <span class="n">output_directory</span> <span class="o">+</span> <span class="n">image_descriptor</span> <span class="o">+</span> <span class="s2">&quot;_type&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">puzzle_type</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>

        <span class="c1"># If a specific filename is specified, use that.</span>
        <span class="n">img_extension</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">if</span> <span class="n">orig_img_filename</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">img_extension</span> <span class="o">=</span> <span class="n">Puzzle</span><span class="o">.</span><span class="n">get_file_extension</span><span class="p">(</span><span class="n">orig_img_filename</span><span class="p">)</span>
            <span class="n">img_root_filename</span> <span class="o">=</span> <span class="n">Puzzle</span><span class="o">.</span><span class="n">get_filename_without_extension</span><span class="p">(</span><span class="n">orig_img_filename</span><span class="p">)</span>
            <span class="n">output_filename</span> <span class="o">+=</span> <span class="s2">&quot;_&quot;</span> <span class="o">+</span> <span class="n">img_root_filename</span>

        <span class="k">if</span> <span class="n">puzzle_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">output_filename</span> <span class="o">+=</span> <span class="s2">&quot;_&quot;</span> <span class="o">+</span> <span class="s2">&quot;solved_puzzle_&quot;</span> <span class="o">+</span> <span class="p">(</span><span class="s2">&quot;</span><span class="si">%04d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">puzzle_id</span><span class="p">)</span>

        <span class="c1"># Convert the timestamp to a string.</span>
        <span class="n">ts_str</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">fromtimestamp</span><span class="p">(</span><span class="n">timestamp</span><span class="p">)</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%Y.%m.</span><span class="si">%d</span><span class="s1">_%H.%M.%S&#39;</span><span class="p">)</span>
        <span class="c1"># Add timestamp and file extension</span>
        <span class="n">output_filename</span> <span class="o">+=</span> <span class="s2">&quot;_&quot;</span> <span class="o">+</span> <span class="n">ts_str</span>
        <span class="k">if</span> <span class="n">img_extension</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">output_filename</span> <span class="o">+=</span> <span class="s2">&quot;.&quot;</span> <span class="o">+</span> <span class="n">img_extension</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">output_filename</span> <span class="o">+=</span> <span class="s2">&quot;.jpg&quot;</span>

        <span class="k">return</span> <span class="n">output_filename</span></div>

    <span class="nd">@staticmethod</span>
<div class="viewcode-block" id="Puzzle.insert_subimage"><a class="viewcode-back" href="../../hammoudeh_puzzle_solver.html#hammoudeh_puzzle_solver.puzzle_importer.Puzzle.insert_subimage">[docs]</a>    <span class="k">def</span> <span class="nf">insert_subimage</span><span class="p">(</span><span class="n">master_img</span><span class="p">,</span> <span class="n">upper_left</span><span class="p">,</span> <span class="n">subimage</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Given an image (in the form of a NumPy array), insert another image into it.</span>

<span class="sd">        Args:</span>
<span class="sd">            master_img : Image in the form of a NumPy array where the sub-image will be inserted</span>
<span class="sd">            upper_left ([int]): upper left location of the the master image where the sub image will be inserted</span>
<span class="sd">            subimage ([int]): Sub-image to be inserted into the master image.</span>

<span class="sd">        Returns:</span>
<span class="sd">        Sub image as a numpy array</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># Verify the upper left input value is valid.</span>
        <span class="k">if</span> <span class="n">Puzzle</span><span class="o">.</span><span class="n">print_debug_messages</span> <span class="ow">and</span> <span class="n">upper_left</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">upper_left</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Error: upper left is off the image grid. Row and column must be &gt;=0&quot;</span><span class="p">)</span>

        <span class="c1"># Calculate the lower right of the image</span>
        <span class="n">subimage_shape</span> <span class="o">=</span> <span class="n">subimage</span><span class="o">.</span><span class="n">shape</span>
        <span class="n">bottom_right</span> <span class="o">=</span> <span class="p">[</span><span class="n">upper_left</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">subimage_shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">upper_left</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">subimage_shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span>

        <span class="c1"># Verify that the shape information is valid.</span>
        <span class="k">if</span> <span class="n">Puzzle</span><span class="o">.</span><span class="n">print_debug_messages</span><span class="p">:</span>
            <span class="n">master_shape</span> <span class="o">=</span> <span class="n">master_img</span><span class="o">.</span><span class="n">shape</span>
            <span class="k">assert</span> <span class="n">master_shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">bottom_right</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">and</span> <span class="n">master_shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">bottom_right</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

        <span class="c1"># Insert the subimage.</span>
        <span class="n">master_img</span><span class="p">[</span><span class="n">upper_left</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span><span class="n">bottom_right</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">upper_left</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span><span class="n">bottom_right</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">subimage</span></div>

    <span class="nd">@staticmethod</span>
<div class="viewcode-block" id="Puzzle.display_image"><a class="viewcode-back" href="../../hammoudeh_puzzle_solver.html#hammoudeh_puzzle_solver.puzzle_importer.Puzzle.display_image">[docs]</a>    <span class="k">def</span> <span class="nf">display_image</span><span class="p">(</span><span class="n">img</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Displays the image in a window for debug viewing.</span>

<span class="sd">        Args:</span>
<span class="sd">            img: OpenCV image in the form of a Numpy array</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">cv2</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="s1">&#39;image&#39;</span><span class="p">,</span> <span class="n">img</span><span class="p">)</span>
        <span class="n">cv2</span><span class="o">.</span><span class="n">waitKey</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">cv2</span><span class="o">.</span><span class="n">destroyAllWindows</span><span class="p">()</span></div>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_save_to_file</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">img</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Save Image to a File</span>

<span class="sd">        Saves any numpy array to an image file.</span>

<span class="sd">        Args:</span>
<span class="sd">            filename (str): Filename and path to save the OpenCV image.</span>
<span class="sd">            img: OpenCV image in the form of a Numpy array</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># If the file directory does not exist create it.</span>
        <span class="n">file_directory</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">filename</span><span class="p">))</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">file_directory</span><span class="p">):</span>
            <span class="k">print</span> <span class="s2">&quot;Creating solved image directory: </span><span class="se">\&quot;</span><span class="si">%s</span><span class="se">\&quot;</span><span class="s2">.&quot;</span> <span class="o">%</span> <span class="n">file_directory</span>
            <span class="n">os</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">file_directory</span><span class="p">)</span>

        <span class="c1"># Write the image to disk.</span>
        <span class="n">cv2</span><span class="o">.</span><span class="n">imwrite</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">img</span><span class="p">)</span>

<div class="viewcode-block" id="Puzzle.save_to_file"><a class="viewcode-back" href="../../hammoudeh_puzzle_solver.html#hammoudeh_puzzle_solver.puzzle_importer.Puzzle.save_to_file">[docs]</a>    <span class="k">def</span> <span class="nf">save_to_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Save Puzzle to a File</span>

<span class="sd">        Saves a puzzle to the specified file name.</span>

<span class="sd">        Args:</span>
<span class="sd">            filename (str): Filename and path to save the OpenCV image.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Puzzle</span><span class="o">.</span><span class="n">_save_to_file</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_img</span><span class="p">)</span></div>

<div class="viewcode-block" id="Puzzle.build_placed_piece_info"><a class="viewcode-back" href="../../hammoudeh_puzzle_solver.html#hammoudeh_puzzle_solver.puzzle_importer.Puzzle.build_placed_piece_info">[docs]</a>    <span class="k">def</span> <span class="nf">build_placed_piece_info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Placed Piece Info Builder</span>

<span class="sd">        For a puzzle, this function builds two Numpy 2D arrays. They are:</span>


<span class="sd">        1. Piece Locations - A Numpy 2D matrix showing the PUZZLE PIECE ID NUMBER in each puzzle location.  If a puzzle</span>
<span class="sd">         piece location has no assigned piece, then the cell is filled with the Puzzle class&#39;s static property</span>
<span class="sd">         &quot;MISSING_PIECE_PUZZLE_INFO_VALUE&quot;</span>

<span class="sd">        2. Piece Rotations - A Numpy 2D matrix showing the ROTATION VALUE NUMBER the puzzle piece in each puzzle</span>
<span class="sd">         location.  If no puzzle piece is assigned to a specific location, then the cell is filled in with the</span>
<span class="sd">         Puzzle class&#39;s static property &quot;MISSING_PIECE_PUZZLE_INFO_VALUE&quot;</span>

<span class="sd">        Returns (Tuple[Numpy[int]]): Location of each puzzle piece in the grid</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># Check whether the upper location is (0, 0)</span>
        <span class="k">if</span> <span class="n">Puzzle</span><span class="o">.</span><span class="n">_PERFORM_ASSERT_CHECKS</span><span class="p">:</span>
            <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">_upper_left</span> <span class="o">==</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

        <span class="c1"># Build a numpy array that is by default &quot;None&quot; for each cell.</span>
        <span class="n">placed_piece_matrix</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">full</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_grid_size</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">int32</span><span class="p">)</span>
        <span class="n">placed_piece_rotation</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">full</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_grid_size</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">int32</span><span class="p">)</span>

        <span class="c1"># For each element in the array,</span>
        <span class="k">for</span> <span class="n">piece</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pieces</span><span class="p">:</span>
            <span class="n">placed_piece_matrix</span><span class="p">[</span><span class="n">piece</span><span class="o">.</span><span class="n">location</span><span class="p">]</span> <span class="o">=</span> <span class="n">piece</span><span class="o">.</span><span class="n">original_piece_id</span>
            <span class="n">placed_piece_rotation</span><span class="p">[</span><span class="n">piece</span><span class="o">.</span><span class="n">location</span><span class="p">]</span> <span class="o">=</span> <span class="n">piece</span><span class="o">.</span><span class="n">rotation</span><span class="o">.</span><span class="n">value</span>

        <span class="c1"># Return the built numpy array</span>
        <span class="k">return</span> <span class="n">placed_piece_matrix</span><span class="p">,</span> <span class="n">placed_piece_rotation</span></div>

    <span class="nd">@staticmethod</span>
<div class="viewcode-block" id="Puzzle.get_side_of_primary_adjacent_to_other_piece"><a class="viewcode-back" href="../../hammoudeh_puzzle_solver.html#hammoudeh_puzzle_solver.puzzle_importer.Puzzle.get_side_of_primary_adjacent_to_other_piece">[docs]</a>    <span class="k">def</span> <span class="nf">get_side_of_primary_adjacent_to_other_piece</span><span class="p">(</span><span class="n">primary_piece_location</span><span class="p">,</span> <span class="n">other_piece_location</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Given two adjacent pieces (i.e. a primary piece and an other piece), return the side of the primary</span>
<span class="sd">        piece that is adjacent (i.e. touching) the other piece.</span>

<span class="sd">        Args:</span>
<span class="sd">            primary_piece_location (PuzzleLocation): Location of the primary piece</span>
<span class="sd">            other_piece_location (PuzzleLocation): Location of the other piece</span>

<span class="sd">        Returns (PuzzlePieceSide): Side of the primary piece adjacent to the other piece.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">diff_row</span> <span class="o">=</span> <span class="n">primary_piece_location</span><span class="o">.</span><span class="n">location</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">other_piece_location</span><span class="o">.</span><span class="n">location</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">diff_col</span> <span class="o">=</span> <span class="n">primary_piece_location</span><span class="o">.</span><span class="n">location</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">other_piece_location</span><span class="o">.</span><span class="n">location</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

        <span class="c1"># Verify the locations are actually adjacent</span>
        <span class="c1"># noinspection PyProtectedMember</span>
        <span class="k">if</span> <span class="n">Puzzle</span><span class="o">.</span><span class="n">_PERFORM_ASSERT_CHECKS</span><span class="p">:</span>
            <span class="k">assert</span> <span class="n">primary_piece_location</span><span class="o">.</span><span class="n">puzzle_id</span> <span class="o">==</span> <span class="n">other_piece_location</span><span class="o">.</span><span class="n">puzzle_id</span>
            <span class="c1"># Verify the locations are exactly one space away</span>
            <span class="k">assert</span> <span class="nb">abs</span><span class="p">(</span><span class="n">diff_row</span><span class="p">)</span> <span class="o">+</span> <span class="nb">abs</span><span class="p">(</span><span class="n">diff_col</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>

        <span class="c1"># Determine the side of the adjacent piece.</span>
        <span class="k">if</span> <span class="n">diff_row</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">PuzzlePieceSide</span><span class="o">.</span><span class="n">top</span>
        <span class="k">if</span> <span class="n">diff_row</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">PuzzlePieceSide</span><span class="o">.</span><span class="n">bottom</span>
        <span class="k">if</span> <span class="n">diff_col</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">PuzzlePieceSide</span><span class="o">.</span><span class="n">left</span>
        <span class="k">if</span> <span class="n">diff_col</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">PuzzlePieceSide</span><span class="o">.</span><span class="n">right</span></div>

<div class="viewcode-block" id="Puzzle.assign_all_piece_id_numbers_to_original_id"><a class="viewcode-back" href="../../hammoudeh_puzzle_solver.html#hammoudeh_puzzle_solver.puzzle_importer.Puzzle.assign_all_piece_id_numbers_to_original_id">[docs]</a>    <span class="k">def</span> <span class="nf">assign_all_piece_id_numbers_to_original_id</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the piece ID number to its original ID number.  Should not generally be used in a puzzle solver.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">piece</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pieces</span><span class="p">:</span>
            <span class="n">piece</span><span class="o">.</span><span class="n">id_number</span> <span class="o">=</span> <span class="n">piece</span><span class="o">.</span><span class="n">original_piece_id</span></div></div>


<div class="viewcode-block" id="PuzzleTester"><a class="viewcode-back" href="../../hammoudeh_puzzle_solver.html#hammoudeh_puzzle_solver.puzzle_importer.PuzzleTester">[docs]</a><span class="k">class</span> <span class="nc">PuzzleTester</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Puzzle tester class used for debugging the solver.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">PIECE_WIDTH</span> <span class="o">=</span> <span class="mi">5</span>
    <span class="n">NUMB_PUZZLE_PIECES</span> <span class="o">=</span> <span class="mi">9</span>
    <span class="n">GRID_SIZE</span> <span class="o">=</span> <span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">NUMB_PUZZLE_PIECES</span><span class="p">)),</span> <span class="nb">int</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">NUMB_PUZZLE_PIECES</span><span class="p">)))</span>
    <span class="n">NUMB_PIXEL_DIMENSIONS</span> <span class="o">=</span> <span class="mi">3</span>

    <span class="n">TEST_ARRAY_FIRST_PIXEL_VALUE</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="c1"># Get the information on the test image</span>
    <span class="n">TEST_IMAGE_FILENAME</span> <span class="o">=</span> <span class="s2">&quot;.</span><span class="se">\\</span><span class="s2">test</span><span class="se">\\</span><span class="s2">test.jpg&quot;</span>
    <span class="n">TEST_IMAGE_WIDTH</span> <span class="o">=</span> <span class="mi">300</span>
    <span class="n">TEST_IMAGE_HEIGHT</span> <span class="o">=</span> <span class="mi">200</span>

    <span class="nd">@staticmethod</span>
<div class="viewcode-block" id="PuzzleTester.build_pixel_list"><a class="viewcode-back" href="../../hammoudeh_puzzle_solver.html#hammoudeh_puzzle_solver.puzzle_importer.PuzzleTester.build_pixel_list">[docs]</a>    <span class="k">def</span> <span class="nf">build_pixel_list</span><span class="p">(</span><span class="n">start_value</span><span class="p">,</span> <span class="n">is_row</span><span class="p">,</span> <span class="n">reverse_list</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Pixel List Builder</span>

<span class="sd">        Given a starting value for the first pixel in the first dimension, this function gets the pixel values</span>
<span class="sd">        in an array similar to a call to &quot;get_row_pixels&quot; or &quot;get_column_pixels&quot; for a puzzle piece.</span>

<span class="sd">        Args:</span>
<span class="sd">            start_value (int): Value of the first (i.e. lowest valued) pixel&#39;s first dimension</span>

<span class="sd">            is_row (bool): True if building a pixel list for a row and &quot;False&quot; if it is a column.  This is used to</span>
<span class="sd">            determine the stepping factor from one pixel to the next.</span>

<span class="sd">            reverse_list (bool): If &quot;True&quot;, HIGHEST valued pixel dimension is returned in the first index of the list</span>
<span class="sd">            and all subsequent pixel values are monotonically DECREASING.  If &quot;False&quot;, the LOWEST valued pixel dimension</span>
<span class="sd">            is returned in the first index of the list and all subsequent pixel values are monotonically increasing.</span>

<span class="sd">        Returns ([int]): An array of individual values simulating a set of pixels</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># Determine the pixel to pixel step size</span>
        <span class="k">if</span> <span class="n">is_row</span><span class="p">:</span>
            <span class="n">pixel_offset</span> <span class="o">=</span> <span class="n">PuzzleTester</span><span class="o">.</span><span class="n">NUMB_PIXEL_DIMENSIONS</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">pixel_offset</span> <span class="o">=</span> <span class="n">PuzzleTester</span><span class="o">.</span><span class="n">row_to_row_step_size</span><span class="p">()</span>

        <span class="c1"># Build the list of pixel values</span>
        <span class="n">pixels</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">PuzzleTester</span><span class="o">.</span><span class="n">PIECE_WIDTH</span><span class="p">,</span> <span class="n">PuzzleTester</span><span class="o">.</span><span class="n">NUMB_PIXEL_DIMENSIONS</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">PuzzleTester</span><span class="o">.</span><span class="n">PIECE_WIDTH</span><span class="p">):</span>
            <span class="n">pixel_start</span> <span class="o">=</span> <span class="n">start_value</span> <span class="o">+</span> <span class="n">i</span> <span class="o">*</span> <span class="n">pixel_offset</span>
            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">PuzzleTester</span><span class="o">.</span><span class="n">NUMB_PIXEL_DIMENSIONS</span><span class="p">):</span>
                <span class="n">pixels</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">pixel_start</span> <span class="o">+</span> <span class="n">j</span>

        <span class="c1"># Return the result either reversed or not.</span>
        <span class="k">if</span> <span class="n">reverse_list</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">pixels</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">pixels</span></div>

    <span class="nd">@staticmethod</span>
<div class="viewcode-block" id="PuzzleTester.row_to_row_step_size"><a class="viewcode-back" href="../../hammoudeh_puzzle_solver.html#hammoudeh_puzzle_solver.puzzle_importer.PuzzleTester.row_to_row_step_size">[docs]</a>    <span class="k">def</span> <span class="nf">row_to_row_step_size</span><span class="p">():</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Row to Row Step Size</span>

<span class="sd">        For a given pixel&#39;s given dimension, this function returns the number of dimensions between this pixel and</span>
<span class="sd">        the matching pixel exactly one row below.</span>

<span class="sd">        It is essentially the number of dimensions multiplied by the width of the original image (in pixels).</span>

<span class="sd">        Returns (int): Offset in dimensions.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">step_size</span> <span class="o">=</span> <span class="n">PuzzleTester</span><span class="o">.</span><span class="n">NUMB_PIXEL_DIMENSIONS</span> <span class="o">*</span> <span class="n">PuzzleTester</span><span class="o">.</span><span class="n">PIECE_WIDTH</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">PuzzleTester</span><span class="o">.</span><span class="n">NUMB_PUZZLE_PIECES</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">step_size</span><span class="p">)</span></div>

    <span class="nd">@staticmethod</span>
<div class="viewcode-block" id="PuzzleTester.piece_to_piece_step_size"><a class="viewcode-back" href="../../hammoudeh_puzzle_solver.html#hammoudeh_puzzle_solver.puzzle_importer.PuzzleTester.piece_to_piece_step_size">[docs]</a>    <span class="k">def</span> <span class="nf">piece_to_piece_step_size</span><span class="p">():</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Piece to Piece Step Size</span>

<span class="sd">        For a given pixel&#39;s given dimension, this function returns the number of dimensions between this pixel and</span>
<span class="sd">        the matching pixel exactly one puzzle piece away.</span>

<span class="sd">        It is essentially the number of dimensions multiplied by the width of a puzzle piece (in pixels).</span>

<span class="sd">        Returns (int): Offset in dimensions.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">PuzzleTester</span><span class="o">.</span><span class="n">NUMB_PIXEL_DIMENSIONS</span> <span class="o">*</span> <span class="n">PuzzleTester</span><span class="o">.</span><span class="n">PIECE_WIDTH</span></div>

    <span class="nd">@staticmethod</span>
<div class="viewcode-block" id="PuzzleTester.build_dummy_puzzle"><a class="viewcode-back" href="../../hammoudeh_puzzle_solver.html#hammoudeh_puzzle_solver.puzzle_importer.PuzzleTester.build_dummy_puzzle">[docs]</a>    <span class="k">def</span> <span class="nf">build_dummy_puzzle</span><span class="p">():</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Dummy Puzzle Builder</span>

<span class="sd">        Using an image on the disk, this function builds a dummy puzzle using a Numpy array that is manually</span>
<span class="sd">        loaded with sequentially increasing pixel values.</span>

<span class="sd">        Returns (Puzzle): A puzzle where each pixel dimension from left to right sequentially increases by</span>
<span class="sd">        one.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># Create a puzzle whose image data will be overridden</span>
        <span class="n">puzzle</span> <span class="o">=</span> <span class="n">Puzzle</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">PuzzleTester</span><span class="o">.</span><span class="n">TEST_IMAGE_FILENAME</span><span class="p">)</span>

        <span class="c1"># Define the puzzle side</span>
        <span class="n">piece_width</span> <span class="o">=</span> <span class="n">PuzzleTester</span><span class="o">.</span><span class="n">PIECE_WIDTH</span>
        <span class="n">numb_pieces</span> <span class="o">=</span> <span class="n">PuzzleTester</span><span class="o">.</span><span class="n">NUMB_PUZZLE_PIECES</span>
        <span class="n">numb_dim</span> <span class="o">=</span> <span class="n">PuzzleTester</span><span class="o">.</span><span class="n">NUMB_PIXEL_DIMENSIONS</span>

        <span class="c1"># Define the array</span>
        <span class="n">dummy_img</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="nb">int</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">piece_width</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">numb_pieces</span><span class="p">))),</span>
                                 <span class="nb">int</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">piece_width</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">numb_pieces</span><span class="p">))),</span>
                                 <span class="n">numb_dim</span><span class="p">))</span>
        <span class="c1"># populate the array</span>
        <span class="n">val</span> <span class="o">=</span> <span class="n">PuzzleTester</span><span class="o">.</span><span class="n">TEST_ARRAY_FIRST_PIXEL_VALUE</span>
        <span class="n">img_shape</span> <span class="o">=</span> <span class="n">dummy_img</span><span class="o">.</span><span class="n">shape</span>
        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">img_shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
            <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">img_shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
                <span class="k">for</span> <span class="n">dim</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">img_shape</span><span class="p">[</span><span class="mi">2</span><span class="p">]):</span>
                    <span class="n">dummy_img</span><span class="p">[</span><span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">,</span> <span class="n">dim</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
                    <span class="n">val</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="c1"># Overwrite the image parameters</span>
        <span class="n">puzzle</span><span class="o">.</span><span class="n">_img</span> <span class="o">=</span> <span class="n">dummy_img</span>
        <span class="n">puzzle</span><span class="o">.</span><span class="n">_img_LAB</span> <span class="o">=</span> <span class="n">dummy_img</span>
        <span class="n">puzzle</span><span class="o">.</span><span class="n">_img_width</span> <span class="o">=</span> <span class="n">img_shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">puzzle</span><span class="o">.</span><span class="n">_img_height</span> <span class="o">=</span> <span class="n">img_shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">puzzle</span><span class="o">.</span><span class="n">_piece_width</span> <span class="o">=</span> <span class="n">PuzzleTester</span><span class="o">.</span><span class="n">PIECE_WIDTH</span>
        <span class="n">puzzle</span><span class="o">.</span><span class="n">_grid_size</span> <span class="o">=</span> <span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">PuzzleTester</span><span class="o">.</span><span class="n">NUMB_PUZZLE_PIECES</span><span class="p">),</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">PuzzleTester</span><span class="o">.</span><span class="n">NUMB_PUZZLE_PIECES</span><span class="p">))</span>

        <span class="c1"># Remake the puzzle pieces</span>
        <span class="n">puzzle</span><span class="o">.</span><span class="n">make_pieces</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">puzzle</span></div></div>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">myPuzzle</span> <span class="o">=</span> <span class="n">Puzzle</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;.\images\muffins_300x200.jpg&quot;</span><span class="p">)</span>
    <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span>
</pre></div>

           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Zayd Hammoudeh.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'0.01',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>